webpackJsonp([4],{"+CN3":function(t,e){},JxQA:function(t,e){},LrNH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("n12u"),s("EuXz");var o=s("BW2B"),n=s("rzQm"),a=s.n(n),i=(s("SldL"),s("7hDC")),r=s.n(i),c={name:"chooseGroup",props:{value:{}},components:{HeadTop:o["a"]},data:function(){return{groups:[],selected:0}},methods:{close:function(){this.$emit("on-close"),this.selected&&this.$emit("input",this.selected)},selectGroup:function(t){this.selected=t,this.close()},getAllGroups:function(){var t=r()(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/plus-group/user-groups?type=allow_post");case 2:e=t.sent,s=e.data,this.groups=s?a()(s):[];case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.selected=this.value,this.getAllGroups()}},l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"router-fadeInRight",mode:"out-in"}},[s("div",{staticClass:"choose-group"},[s("head-top",{attrs:{"go-back":t.close,title:"选择圈子"}}),s("div"),s("div",{staticClass:"choose-group-list"},t._l(t.groups,function(e){return e.id?s("div",{key:e.id,staticClass:"choose-group-item ellipsis",class:{active:t.selected.id===e.id},on:{click:function(s){t.selectGroup(e)}}},[t._v(t._s(e.name))]):t._e()}))],1)])},u=[],d=s("XyMi");function p(t){s("kSMo")}var h=!1,f=p,v="data-v-106042ff",g=null,m=Object(d["a"])(c,l,u,h,f,v,g),_=m.exports,C="post--group-feed",y={name:"postGroupFeed",components:{HeadTop:o["a"],ChooseGroup:_},data:function(){return{prefixCls:C,title:"",body:"",showChoose:!1,selectGroup:{}}},computed:{chooseTips:function(){return this.selectGroup.name||"选择圈子"},groupID:function(){return this.selectGroup.id||this.$route.params.groupID},disabled:function(){return!(this.title.length>0&&this.body.length>0)}},methods:{showChoosePage:function(){this.showChoose=!0},closeChoosePage:function(){this.showChoose=!1},goBack:function(){this.$router.go(-1)},postFeed:function(){var t=this;if(this.groupID){var e={title:this.title,body:this.body,summary:this.body,feed_from:2};this.$http.post("/plus-group/groups/".concat(this.groupID,"/posts"),Object.assign({},e)).then(function(e){var s=e.data.post;s.id&&(console.log("发布成功"),t.$router.push("/group/".concat(t.groupID,"/feed/").concat(s.id)))})}}}},b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.prefixCls},[s("head-top",{attrs:{"go-back":!0,title:"发帖",append:!0}},[s("button",{class:t.prefixCls+"-btn",attrs:{slot:"prepend"},on:{click:t.goBack},slot:"prepend"},[t._v("取消")]),s("button",{class:t.prefixCls+"-btn",attrs:{slot:"append",disabled:t.disabled},on:{click:t.postFeed},slot:"append"},[t._v("发布")])]),s("div"),s("div",{class:t.prefixCls+"-content"},[!t.groupID||t.selectGroup.id?[s("div",{class:t.prefixCls+"-select",on:{click:function(e){e.stopPropagation(),t.showChoosePage(e)}}},[s("div",{class:t.prefixCls+"-select-label"},[t._v(t._s(t.chooseTips))]),s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]:t._e(),s("div",{class:t.prefixCls+"-title"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"输入标题, 20字以内",maxlength:"20"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),s("div",{class:t.prefixCls+"-body"},[s("textarea",{directives:[{name:"txtautosize",rawName:"v-txtautosize"},{name:"model",rawName:"v-model",value:t.body,expression:"body"}],attrs:{placeholder:"输入要说的话, 图文结合更精彩哦"},domProps:{value:t.body},on:{input:function(e){e.target.composing||(t.body=e.target.value)}}})])],2),s("ChooseGroup",{directives:[{name:"show",rawName:"v-show",value:t.showChoose,expression:"showChoose"}],on:{"on-close":t.closeChoosePage},model:{value:t.selectGroup,callback:function(e){t.selectGroup=e},expression:"selectGroup"}})],1)},w=[];function k(t){s("YBoS")}var x=!1,$=k,O=null,T=null,E=Object(d["a"])(y,b,w,x,$,O,T);e["default"]=E.exports},YBoS:function(t,e){},Z7Of:function(t,e){},abNE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("rzQm"),n=s.n(o),a=s("M4fF"),i=s.n(a),r=s("BW2B"),c=s("zrnl"),l=[],u={name:"searchUser",components:{HeadTop:r["a"],findItem:c["a"]},data:function(){return{rec:[],keyword:"",dataList:[]}},methods:{cancel:function(){this.$router.go(-1)},search:i.a.debounce(function(){var t=this,e=this;i.a.remove(l,function(t){return null===t.source}),l.forEach(function(t){null!==t&&null!==t.source&&1===t.status&&(t.status=0,t.source.cancel("取消上一个"))});var s={source:e.$http.CancelToken.source(),status:1};l.push(s),e.keyword&&e.$http.get("/user/search?keyword=".concat(e.keyword),{cancelToken:s.source.token}).then(function(e){var o=e.data,n=void 0===o?[]:o;s.source=null,t.dataList=n}).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.response;o=void 0===o?{}:o;var n=o.data,a=void 0===n?{message:"搜索失败"}:n;s.source=null,e.$Message.error(a)})},500),getRecUser:function(){var t=this;this.$http.get("/user/find-by-tags").then(function(e){var s=e.data,o=void 0===s?[]:s;console.log(o),t.rec=n()(o)}).catch(function(t){console.log(t)})}},created:function(){this.getRecUser()}},d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-search_usr"},[s("head-top",{attrs:{append:!0,title:"1"}},[s("div",{staticClass:"head-top-cancel",attrs:{slot:"append"},on:{click:t.cancel},slot:"append"},[t._v("取消")]),s("div",{staticClass:"head-top-search",attrs:{slot:"title"},slot:"title"},[s("v-icon",{staticClass:"head-top-search-icon",attrs:{type:"base-search"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"head-top-search-input",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.search]}})],1)]),s("div"),s("div",{staticClass:"search_usr-list"},[0===t.dataList.length?t._l(t.rec,function(e){return e.id?s("find-item",{key:"search_usr-"+e.id,attrs:{user:e}}):t._e()}):t._l(t.dataList,function(e){return e.id?s("find-item",{key:"search_usr-"+e.id,attrs:{user:e}}):t._e()})],2)],1)},p=[],h=s("XyMi");function f(t){s("JxQA")}var v=!1,g=f,m=null,_=null,C=Object(h["a"])(u,d,p,v,g,m,_);e["default"]=C.exports},daJI:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("rzQm"),n=s.n(o),a=(s("dSUw"),s("beEN"),s("n12u"),s("NYxO")),i=s("BW2B"),r={name:"chooseTags",components:{HeadTop:i["a"]},data:function(){return{selected:[]}},computed:Object.assign({},Object(a["d"])({tags:function(t){return t.USERTAGS},cur_selected:function(t){return t.CUR_SELECTED_TAGS}})),methods:{ok:function(){this.$store.state.CUR_SELECTED_TAGS=this.selected,this.$router.go(this.$route.query.redirect)},selectTag:function(t){var e=this.selected.indexOf(t);if(e>-1){var s=this.selected;s.splice(e,1),this.selected=s}else this.selected.length<5?this.selected=Array.from(new Set(n()(this.selected).concat([t]))):this.$Message.error("标签最多选择5个")}},created:function(){this.$store.dispatch("GET_USER_TAGS"),this.selected=this.cur_selected}},c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("div",{staticClass:"full-page"},[s("head-top",{attrs:{"go-back":!0,append:"true",title:t.$route.meta.title}},[s("div",{attrs:{slot:"append"},on:{click:t.ok},slot:"append"},[t._v(t._s(t.selected.length>0?"下一步":"取消"))])]),s("div",{staticClass:"user--tags"},[s("label",{staticClass:"user--tags-label"},[t._v("可选5个标签, 已选择"+t._s(t.selected.length)+"个标签")]),s("div",{staticClass:"user--tags-list"},t._l(t.selected,function(e){return e.id?s("div",{key:"group--tag-selected-"+e.id,staticClass:"user--tags-list-item ellipsis selected",on:{click:function(s){t.selectTag(e)}}},[s("v-icon",{attrs:{type:"base-clean"}}),t._v("\n                    "+t._s(e.name)+"\n                ")],1):t._e()}))]),t._l(t.tags,function(e){return s("div",{key:e.name,staticClass:"user--tags"},[s("label",{staticClass:"user--tags-label"},[t._v(t._s(e["name"]))]),s("div",{staticClass:"user--tags-list"},t._l(e["tags"],function(e){return e.id?s("div",{key:"group--tag-"+e.id,staticClass:"user--tags-list-item ellipsis",class:{active:t.selected.indexOf(e)>-1},on:{click:function(s){t.selectTag(e)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")]):t._e()}))])})],2)])},l=[],u=s("XyMi");function d(t){s("+CN3")}var p=!1,h=d,f=null,v=null,g=Object(u["a"])(r,c,l,p,h,f,v);e["default"]=g.exports},kSMo:function(t,e){},vJxF:function(t,e){},wMbj:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("EuXz"),s("mJx5");var o=s("NM/j"),n=s.n(o),a=(s("VjuZ"),s("M4fF")),i=s.n(a),r=s("BW2B"),c=[],l={name:"chooseLocation",components:{HeadTop:r["a"]},data:function(){return{keyword:"",showHot:!0,loading:!1,dataList:[],redirect:""}},computed:{location:function(){var t=this.$store.state.LOCATION||{};return"{}"===JSON.stringify(t)?this.$store.dispatch("GET_LOCATION"):this.loading=!1,t},cur_icon:function(){return this.is_loading?"base-loading":"location-arrow"},cur_txt:function(){return this.location.label||""},hot_citys:function(){return this.$store.state.HOTCTIYS},is_loading:function(){return this.loading||!(this.cur_txt.length>0)},isShowHot:function(){return!(this.keyword.length>0)&&!(this.dataList.length>0)}},methods:{updateLocation:function(){this.loading=!0,this.$store.dispatch("UPDATE_LOCATION")},chooseHotCity:function(t){var e=this;this.$http.get("around-amap/geo?address=".concat(t.replace(/[\s\uFEFF\xA0]+/g,""))).then(function(t){var s=t.data;s=void 0===s?{}:s;var o=n()(s.geocodes,1),a=o[0],i=a.city,r=a.district,c=a.province,l=a.location,u=l.split(","),d=n()(u,2),p=d[0],h=d[1],f=r.length>0?r:i.length>0?i:c;e.redirect?e.redirect.indexOf("/find/")>-1?(e.$store.commit("SAVE_LOCATION",{label:f,lng:p,lat:h}),e.$router.push("/find/nearby?lng=".concat(p,"&lat=").concat(h))):e.redirect.indexOf("/add_group")>-1&&(e.$store.commit("SAVE_GROUP_LOCATION",{label:f,lng:p,lat:h}),e.$router.go(-1)):e.$router.go(-1)}).catch(function(t){console.log(t)})},search:i.a.debounce(function(){var t=this;i.a.remove(c,function(t){return null===t.source}),c.forEach(function(t){null!==t&&null!==t.source&&1===t.status&&(t.status=0,t.source.cancel("取消上一个"))});var e={source:t.$http.CancelToken.source(),status:1};c.push(e),t.keyword&&t.$http.get("/locations/search?name=".concat(t.keyword),{cancelToken:e.source.token}).then(function(s){var o=s.data,n=void 0===o?[]:o;e.source=null,t.dataList=n.map(function(t){var e="";t=t.tree;while(t)e=t.name+","+e,t=t.parent;return e.substr(0,e.length-1)})}).catch(function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=s.response;o=void 0===o?{}:o;var n=o.data,a=void 0===n?{message:"搜索失败"}:n;e.source=null,t.$Message.error(a)})},500)},beforeRouteEnter:function(t,e,s){s(function(t){t.redirect=e.fullPath})},created:function(){this.$store.dispatch("GET_HOT_CITYS")}},u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-location"},[s("head-top",{attrs:{append:!0,title:"选择定位"}},[s("div",{staticClass:"head-top-cancel",attrs:{slot:"append"},on:{click:function(e){t.$router.go(-1)}},slot:"append"},[t._v("取消")]),s("div",{staticClass:"head-top-search",attrs:{slot:"title"},slot:"title"},[s("v-icon",{staticClass:"head-top-search-icon",attrs:{type:"base-search"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"head-top-search-input",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.search]}})],1)]),s("div"),t.isShowHot?[s("div",{staticClass:"location-current"},[s("span",[t._v("当前定位")]),s("span",{staticClass:"location-current-txt",class:{c999:!t.cur_txt}},[t._v(t._s(t.cur_txt||"未定位"))]),s("v-icon",{staticClass:"location-current-append",class:{"btn-loading":"base-loading"===t.cur_icon},attrs:{type:t.cur_icon},nativeOn:{click:function(e){e.stopPropagation(),t.updateLocation(e)}}})],1),s("div",{staticClass:"location-hot"},[s("label",[t._v("热门城市")]),s("div",{staticClass:"location-hot-list"},t._l(t.hot_citys,function(e){return e.length>0?s("div",{key:e,staticClass:"location-hot-item",on:{click:function(s){t.chooseHotCity(e)}}},[t._v("\n                    "+t._s(e.slice(e.lastIndexOf(" ")))+"\n                ")]):t._e()}))])]:t._e(),t.dataList.length>0?[s("ul",{staticClass:"location-search-list"},t._l(t.dataList,function(e){return e?s("li",{key:e,staticClass:"location-search-list-item",on:{click:function(s){t.chooseHotCity(e)}}},[t._v("\n                "+t._s(e)+"\n            ")]):t._e()}))]:t._e()],2)},d=[],p=s("XyMi");function h(t){s("vJxF")}var f=!1,v=h,g=null,m=null,_=Object(p["a"])(l,u,d,f,v,g,m);e["default"]=_.exports},zrnl:function(t,e,s){"use strict";var o={name:"findItem",props:["user"],data:function(){return{loading:!1}},computed:{isFollow:function(){var t=this.user,e=t.follower,s=void 0!==e&&e,o=t.following,n=void 0!==o&&o;return s&&n?"eachFollow":s?"follow":"unFollow"}},methods:{toUserHome:function(){this.$router.push("/user/".concat(this.user.id))},followUser:function(){var t=this;if(this.loading)return!1;this.loading=!0,this.$store.dispatch("FOLLOW_USER",{id:this.user.id,status:this.isFollow}).then(function(e){var s=e.follower;t.loading=!1,t.user.follower=s}).catch(function(){setTimeout(function(){t.loading=!1},3e3)})}}},n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"find-item",attrs:{id:"find-usr-"+t.user.id},on:{click:t.toUserHome}},[s("v-avatar",{staticClass:"find-item-avatar",attrs:{sex:"user.sex",src:t.user.avatar}},[t._v("\n        "+t._s(t.user.name.slice(0,1))+"\n    ")]),s("div",{staticClass:"find-item-info"},[s("p",{staticClass:"find-item-name ellipsis"},[t._v(t._s(t.user.name))]),s("p",{staticClass:"find-item-bio ellipsis"},[t._v(t._s(t.user.bio))])]),[s("v-icon",{staticClass:"find-item-follow-icon",attrs:{type:"base-"+t.isFollow},nativeOn:{click:function(e){e.stopPropagation(),t.followUser(e)}}})]],2)},a=[],i=s("XyMi");function r(t){s("Z7Of")}var c=!1,l=r,u=null,d=null,p=Object(i["a"])(o,n,a,c,l,u,d);e["a"]=p.exports}});
//# sourceMappingURL=common.js.map
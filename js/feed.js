webpackJsonp([9],{"7VMF":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("rzQm"),s=n.n(i),o=(n("EuXz"),n("VjuZ"),n("14gb")),a=n("fxnj"),r=n.n(a),c=(n("y9m4"),n("0zyd")),l=function(e){return new Promise(function(t,n){c["a"].post("socialite/wxconfig",{url:e},{validateStatus:function(e){return 200===e}}).then(function(e){var n=e.data;t(n)}).catch(function(){n(new Error)})})},d={getOauth:l},u=n("UnZV"),m=n("axjn"),f={name:"feed-detail",components:{ArticleCard:u["a"],CommentItem:m["a"]},data:function(){return{oldID:0,feed:{},loading:!0,fetching:!1,comments:[],pinnedCom:[],rewardList:[],fetchComing:!1,noMoreCom:!1,maxComId:0,config:{appid:"",signature:"",timestamp:"",noncestr:""},appList:["onMenuShareQZone","onMenuShareQQ","onMenuShareAppMessage","onMenuShareTimeline"],share:{title:"",desc:"",link:""}}},computed:{feedID:function(){return this.$route.params.feedID},CURRENTUSER:function(){return this.$store.state.CURRENTUSER},user:function(){var e=this.feed.user;return e&&e.id===this.feed.user_id?e:{}},isMine:function(){return this.feed.user_id===this.CURRENTUSER.id},likes:{get:function(){return this.feed.likes||[]},set:function(e){this.feed.likes=e}},liked:{get:function(){return!!this.feed.has_like},set:function(e){this.feed.has_like=e}},likeCount:{get:function(){return this.feed.like_count||0},set:function(e){this.feed.like_count=~~e}},commentCount:{get:function(){return this.feed.feed_comment_count||0},set:function(e){this.feed.feed_comment_count=e}},reward:function(){return this.feed.reward||{}},images:function(){return this.feed.images||[]},time:function(){return this.feed.created_at||""},feedContent:function(){return this.feed.feed_content||""},firstImage:function(){var e=this.images;if(!e.length)return"";var t=e[0]||{};return this.$http.defaults.baseURL+"/files/"+t.file+"?w=300&h=300"},isWechat:function(){return this.$store.state.BROWSER.isWechat}},methods:{replaceURI:function(e){var t=/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g;return e?e.replace(t,function(e){return'<a class="m-art-links" href="'.concat(e,'" target="__blank">#ÁΩëÈ°µÈìæÊé•#</a>')}):""},shareSuccess:function(){this.$Message.success("ÂàÜ‰∫´ÊàêÂäü")},shareCancel:function(){this.$Message.success("ÂèñÊ∂àÂàÜ‰∫´")},fetchFeed:function(){var e=this;this.fetching||(this.fetching=!0,this.$http.get("/feeds/".concat(this.feedID)).then(function(t){var n=t.data,i=void 0===n?{}:n;e.feed=i,e.share.title=i.user.name+"ÁöÑÂä®ÊÄÅ",e.share.desc=i.feed_content,e.oldID=e.feedID,e.fetching=!1,e.fetchFeedComments(),e.fetchRewards(),e.isWechat&&e.getWeChatConfig()}).catch(function(){e.$router.back()}))},fetchFeedComments:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fetchComing||(this.fetchComing=!0,this.$http.get("/feeds/".concat(this.feedID,"/comments"),{params:{after:t}}).then(function(n){var i=n.data,o=i.pinneds,a=void 0===o?[]:o,r=i.comments,c=void 0===r?[]:r;a&&a.length&&(e.pinnedCom=t?s()(e.pinneds).concat(s()(a)):a),c&&c.length?(e.comments=t?s()(e.comments).concat(s()(c)):c,e.maxComId=c[c.length-1].id):e.noMoreCom=!0,e.$nextTick(function(){e.fetchComing=!1,e.loading=!1})}).catch(function(){e.loading=!1,e.fetchComing=!1}))},fetchRewards:function(){var e=this;this.$http.get("/feeds/".concat(this.feedID,"/rewards"),{params:{limit:10}}).then(function(t){var n=t.data,i=void 0===n?[]:n;console.log(i),e.rewardList=i})},rewardFeed:function(){o["a"].$emit("reward:feed",this.feedID)},likeFeed:function(){var e=this,t=this.liked?"delete":"post",n=this.liked?"/feeds/".concat(this.feedID,"/unlike"):"/feeds/".concat(this.feedID,"/like");this.fetching||(this.fetching=!0,this.$http({method:t,url:n,validataStatus:function(e){return 201===e||204===e}}).then(function(){"post"===t?(e.liked=!0,e.likeCount+=1,e.likes.length<5&&(e.likes=s()(e.likes).concat([{user:e.CURRENTUSER,id:(new Date).getTime(),user_id:e.CURRENTUSER.id}]))):(e.liked=!1,e.likeCount-=1,e.likes=e.likes.filter(function(t){return t.user_id!==e.CURRENTUSER.id})),e.fetching=!1}).catch(function(){e.fetching=!1}))},commentFeed:function(){var e=this;o["a"].$emit("commentInput",{onOk:function(t){e.sendComment({body:t})}})},shareFeed:function(){this.isWechat?this.$Message.success("ËØ∑‰ΩøÁî®ÂæÆ‰ø°Ëá™Â∏¶ÂàÜ‰∫´üò≥"):this.$Message.success("Âä†Á¥ßÂºÄÂèë‰∏≠...üò≥")},moreAction:function(){var e=this,t=[{text:"Êî∂Ëóè",method:function(){console.log("Êî∂Ëóè")}}],n=this.isMine?[{text:"Áî≥ËØ∑ÊñáÁ´†ÁΩÆÈ°∂",method:function(){e.$Message.info("ÁΩÆÈ°∂ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ")}},{text:"Âà†Èô§",method:function(){e.$Message.info("ËµÑËÆØÂà†Èô§ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ")}}]:[{text:"‰∏æÊä•",method:function(){e.$Message.info("‰∏æÊä•ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ")}}];o["a"].$emit("actionSheet",t.concat(n),"ÂèñÊ∂à")},getWeChatConfig:function(){var e=this,t=window.location.origin+this.$route.fullPath;this.share.link=t,""===this.config.appid?d.getOauth(t).then(function(t){e.config.timestamp=t.timestamp||"",e.config.signature=t.signature||"",e.config.appid=t.appid||"",e.config.noncestr=t.noncestr||"",r.a.config({debug:!1,appId:e.config.appid,timestamp:e.config.timestamp,signature:e.config.signature,nonceStr:e.config.noncestr,jsApiList:e.appList}),r.a.ready(function(){}),r.a.error(function(){}),r.a.onMenuShareTimeline({title:e.share.title,desc:e.share.desc,link:e.share.link,imgUrl:e.firstImage,success:function(){e.shareSuccess()},cancel:function(){e.shareCancel()}}),r.a.onMenuShareAppMessage({title:e.share.title,desc:e.share.desc,link:e.share.link,imgUrl:e.firstImage,success:function(){e.shareSuccess()},cancel:function(){e.shareCancel()}}),r.a.onMenuShareQQ({title:e.share.title,desc:e.share.desc,link:e.share.link,imgUrl:e.firstImage,success:function(){e.shareSuccess()},cancel:function(){e.shareCancel()}})}):(this.$Message.success("ËØ∑‰ΩøÁî®ÂæÆ‰ø°Ëá™Â∏¶ÂàÜ‰∫´üò≥"),r.a.config({debug:!1,appId:this.config.appid,timestamp:this.config.timestamp,signature:this.config.signature,nonceStr:this.config.noncestr,jsApiList:this.appList}),r.a.ready(function(){}),r.a.error(function(){}),r.a.onMenuShareTimeline({title:this.share.title,desc:this.share.desc,link:this.share.link,imgUrl:this.firstImage,success:function(){e.shareSuccess()},cancel:function(){e.shareCancel()}}),r.a.onMenuShareAppMessage({title:this.share.title,desc:this.share.desc,link:this.share.link,imgUrl:this.firstImage,success:function(){e.shareSuccess()},cancel:function(){e.shareCancel()}}),r.a.onMenuShareQQ({title:this.share.title,desc:this.share.desc,link:this.share.link,imgUrl:this.firstImage,success:function(){e.shareSuccess()},cancel:function(){e.shareCancel()}}))},replyComment:function(e,t){var n=this;e===this.CURRENTUSER.id?o["a"].$emit("actionSheet",[{text:"Áî≥ËØ∑ËØÑËÆ∫ÁΩÆÈ°∂",method:function(){n.$Message.info("ÁΩÆÈ°∂ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ")}},{text:"Âà†Èô§ËØÑËÆ∫",method:function(){n.$Message.info("ËØÑËÆ∫Âà†Èô§ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ")}}],"ÂèñÊ∂à"):o["a"].$emit("commentInput",{placeholder:"ÂõûÂ§çÔºö ".concat(t),onOk:function(t){n.sendComment({reply_user:e,body:t})}})},sendComment:function(e){var t=this,n=e.reply_user,i=e.body,s={};i&&i.length>0?(s.body=i,n&&(s["reply_user"]=n),this.$http.post("/feeds/".concat(this.feedID,"/comments"),s,{validataStatus:function(e){return 201===e}}).then(function(){t.$Message.success("ËØÑËÆ∫ÊàêÂäü"),o["a"].$emit("commentInput:close",!0)}).catch(function(){t.$Message.error("ËØÑËÆ∫Â§±Ë¥•"),o["a"].$emit("commentInput:close",!0)})):this.$Message.error("ËØÑËÆ∫ÂÜÖÂÆπ‰∏çËÉΩ‰∏∫Á©∫")}},activated:function(){var e=this;this.feedID&&(this.feedID!==this.oldID?this.fetchFeed():setTimeout(function(){e.loading=!1},600))},deactivated:function(){this.loading=!0,this.share={title:"",desc:"",link:""},this.config={appid:"",timestamp:0,noncestr:"",signature:""}}},h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article-card",{attrs:{liked:e.liked,loading:e.loading},on:{"on-like":e.likeFeed,"on-share":e.shareFeed,"on-more":e.moreAction,"on-comment":e.commentFeed}},[n("header",{staticClass:"m-box m-justify-bet m-aln-center",attrs:{slot:"head"},slot:"head"},[n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0"},[n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:e.goBack}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),n("div",{staticClass:"m-box-model m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title"},[n("div",{staticClass:"m-avatar-box small"},[n("img",{attrs:{src:e.user.avatar}})])]),n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end"},[n("svg",{staticClass:"m-style-svg m-svg-def"},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-share"}})])])]),n("main",{staticClass:"m-flex-shrink1 m-flex-grow1 m-art m-main"},[n("div",{staticClass:"m-art-body"},[e._l(e.images,function(t){return t.file?n("async-file",{key:t.file,attrs:{file:t.file},scopedSlots:e._u([{key:"default",fn:function(t){return t.src?n("img",{attrs:{src:t.src}}):e._e()}}])},[e._v("\n      />\n    ")]):e._e()}),n("p",{staticClass:"m-text-box",domProps:{innerHTML:e._s(e.replaceURI(e.feedContent))}})],2),n("div",{staticClass:"m-box m-aln-center m-justify-bet m-art-foot"},[n("div",{staticClass:"m-flex-grow1 m-flex-shrink1 m-box m-aln-center m-art-like-list"},[e.likeCount>0?[n("ul",{staticClass:"m-box m-flex-grow0 m-flex-shrink0"},e._l(e.likes.slice(0,5),function(e,t){var i=e.user;void 0===i&&(i={});var s=e.id;return n("li",{key:s,staticClass:"m-avatar-box tiny",class:"m-avatar-box-"+i.sex,style:{zIndex:5-t}},[n("img",{attrs:{src:i.avatar}})])})),n("span",[e._v(e._s(e._f("formatNum")(e.likeCount))+"‰∫∫ÁÇπËµû")])]:e._e()],2),n("div",{staticClass:"m-box-model m-aln-end m-art-info"},[n("span",[e._v("ÂèëÂ∏É‰∫é"+e._s(e._f("time2tips")(e.time)))]),n("span",[e._v(e._s(e._f("formatNum")(e.feed.feed_view_count||0))+"ÊµèËßà")])])]),n("div",{staticClass:"m-box-model m-box-center m-box-center-a m-art-reward"},[n("button",{staticClass:"m-art-rew-btn",on:{click:e.rewardFeed}},[e._v("Êâì Ëµè")]),n("p",{staticClass:"m-art-rew-label"},[n("a",{attrs:{href:"javascript:;"}},[e._v(e._s(e._f("formatNum")(e.reward.count)))]),e._v("‰∫∫ÊâìËµèÔºåÂÖ±"),n("a",{attrs:{href:"javascript:;"}},[e._v(e._s(~~e.reward.amount/100))]),e._v("ÂÖÉ")]),n("ul",{staticClass:"m-box m-aln-center m-art-rew-list"},e._l(e.rewardList,function(e){return n("li",{key:e.id,staticClass:"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny",class:"m-avatar-box-"+e.user.sex},[n("img",{attrs:{src:e.user.avatar}})])}))])]),n("div",{staticClass:"m-box-model m-art-comments",attrs:{id:"comment_list"}},[n("ul",{staticClass:"m-box m-aln-center m-art-comments-tabs"},[n("li",[e._v(e._s(e._f("formatNum")(e.commentCount))+"Êù°ËØÑËÆ∫")])]),e._l(e.pinnedCom,function(t){return n("comment-item",{key:"pinned-comment-"+t.id,attrs:{pinned:!0,comment:t},on:{"on-click":e.replyComment}})}),e._l(e.comments,function(t){return n("comment-item",{key:t.id,attrs:{comment:t},on:{"on-click":e.replyComment}})}),n("div",{staticClass:"m-box m-aln-center m-justify-center load-more-box"},[e.noMoreCom?n("span",{staticClass:"load-more-ph"},[e._v("---Ê≤°ÊúâÊõ¥Â§ö---")]):n("span",{staticClass:"load-more-btn",on:{click:function(t){t.stopPropagation(),e.fetchFeedComments(e.maxComId)}}},[e._v("\n        "+e._s(e.fetchComing?"Âä†ËΩΩ‰∏≠...":"ÁÇπÂáªÂä†ËΩΩÊõ¥Â§ö")+"\n      ")])])],2)])},p=[],g=n("XyMi"),v=!1,w=null,k=null,_=null,x=Object(g["a"])(f,h,p,v,w,k,_);t["default"]=x.exports},UnZV:function(e,t,n){"use strict";var i=n("hAM4"),s=n.n(i),o={name:"article-card",props:{loading:{type:Boolean,default:!0},liked:{type:Boolean,default:!1}},methods:{handelLike:function(){this.$emit("on-like")},handelComment:function(){this.$emit("on-comment")},handelShare:function(){this.$emit("on-share")},handelMore:function(){this.$emit("on-more")},goback:function(){this.$router.go(-1)}},mounted:function(){this.headroom=new s.a(this.$refs.head,{tolerance:5,offset:50,classes:{initial:"headroom-head",pinned:"headroom--headShow",unpinned:"headroom--headHide"}}),this.footroom=new s.a(this.$refs.foot,{tolerance:5,offset:50,classes:{initial:"headroom-foot",pinned:"headroom--footShow",unpinned:"headroom--footHide"}}),this.headroom.init(),this.footroom.init()}},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",[n("div",{staticClass:"m-wrapper m-wbox"},[n("div",{staticClass:"m-box-model m-art-card"},[n("div",{ref:"head",staticClass:"m-box-model m-justify-center m-pos-f m-head-top m-main m-bb1 m-lim-width"},[e._t("head",[n("header",{staticClass:"m-box m-justify-bet m-aln-center"},[n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0"},[n("svg",{staticClass:"m-style-svg m-svg-def",on:{click:e.goback}},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-back"}})])]),n("div",{staticClass:"m-box-model m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title"},[e._v("ËµÑËÆØËØ¶ÊÉÖ")]),n("div",{staticClass:"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end"},[n("svg",{staticClass:"m-style-svg m-svg-def"},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-share"}})])])])])],2),e.loading?n("div",{staticClass:"m-spinner pos-f"},[n("div"),n("div")]):e._e(),n("main",{staticClass:"m-lim-width m-box-model m-art-card-main mt90"},[e._t("default")],2),n("footer",{ref:"foot",staticClass:"m-pos-f m-box m-aln-center m-justify-aro m-bt1 m-art-card-foot"},[e._t("foot",[n("a",{staticClass:"m-box-model m-aln-center",on:{click:function(t){t.preventDefault(),e.handelLike(t)}}},[n("svg",{staticClass:"m-style-svg m-svg-def"},[n("use",{attrs:{"xlink:href":e.liked?"#feed-like":"#feed-unlike"}})]),n("span",[e._v("ÂñúÊ¨¢")])]),n("a",{staticClass:"m-box-model m-aln-center",on:{click:function(t){t.preventDefault(),e.handelComment(t)}}},[n("svg",{staticClass:"m-style-svg m-svg-def"},[n("use",{attrs:{"xlink:href":"#feed-comment"}})]),n("span",[e._v("ËØÑËÆ∫")])]),n("a",{staticClass:"m-box-model m-aln-center",on:{click:function(t){t.preventDefault(),e.handelShare(t)}}},[n("svg",{staticClass:"m-style-svg m-svg-def"},[n("use",{attrs:{"xlink:href":"#base-share"}})]),n("span",[e._v("ÂàÜ‰∫´")])]),n("a",{staticClass:"m-box-model m-aln-center",on:{click:function(t){t.preventDefault(),e.handelMore(t)}}},[n("svg",{staticClass:"m-style-svg m-svg-def"},[n("use",{attrs:{"xlink:href":"#feed-more"}})]),n("span",[e._v("Êõ¥Â§ö")])])])],2)])])])},r=[],c=n("XyMi"),l=!1,d=null,u=null,m=null,f=Object(c["a"])(o,a,r,l,d,u,m);t["a"]=f.exports},axjn:function(e,t,n){"use strict";n("EuXz");function i(e){for(var t,n=0,i=0;i<e.length;i++)t=e.charCodeAt(i),t<127?n+=.25:t>=128&&t<=2047?n+=1:t>=2048&&t<=65535&&(n+=1.5);return n}var s={name:"comment-item",props:{comment:null,pinned:Boolean},data:function(){return{showAll:!1}},computed:{isShowAll:{get:function(){return this.bodyLength<60||this.showAll},set:function(e){this.showAll=e}},user:function(){var e=this.comment.user;return e&&e.id?e:{}},replyUser:function(){var e=this.comment.reply;return e&&e.id?e:null},body:function(){return this.comment.body||""},bodyLength:function(){return i(this.body)},time:function(){return this.comment.created_at||""}},methods:{handelClick:function(){if(!this.isShowAll)return this.isShowAll=!this.isShowAll;this.$emit("on-click",this.user.id,this.user.name,this.comment.id)}},mounted:function(){this.$store.commit("SAVE_USER",this.user)}},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-lim-width m-art-comment"},[n("div",{staticClass:"m-box m-art-comment-wrap"},[n("avatar",{attrs:{user:e.user}}),n("section",{staticClass:"m-box-model m-flex-grow1 m-flex-shrink1 m-art-comment-body"},[n("header",{staticClass:"m-box m-aln-center m-justify-bet m-art-comment-usr"},[n("h4",{staticClass:"m-flex-grow1 m-flex-shrink1"},[e._v(e._s(e.user.name))]),n("div",{staticClass:"m-box m-aln-center"},[e.pinned?n("span",{staticClass:"m-art-comment-icon-top"},[e._v("ÁΩÆÈ°∂")]):e._e(),n("span",[e._v(e._s(e._f("time2tips")(e.time)))])])]),n("article",{staticClass:"m-text-box m-art-comment-con",class:{maxh:!e.isShowAll},on:{click:e.handelClick}},[e.replyUser?[n("span",{staticClass:"m-art-comment-rep"},[e._v("\n            ÂõûÂ§ç"),n("router-link",{attrs:{to:"/user/"+e.replyUser.id}},[e._v(e._s(e.replyUser.name))]),e._v("Ôºö\n          ")],1)]:e._e(),e._v("\n        "+e._s(e.body)+"\n        "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.bodyLength>60&&!e.isShowAll,expression:"bodyLength > 60 && !isShowAll"}],staticClass:"m-text-more",on:{click:function(t){t.stopPropagation(),e.isShowAll=!e.isShowAll}}},[e._v(" >>Êõ¥Â§ö")])],2)])],1)])},a=[],r=n("XyMi"),c=!1,l=null,d=null,u=null,m=Object(r["a"])(s,o,a,c,l,d,u);t["a"]=m.exports},cboG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("rzQm"),s=n.n(i),o=(n("SldL"),n("7hDC")),a=n.n(o),r=n("ZoQJ"),c=n("WCcI"),l=n("tvC7"),d=["new","hot","follow"],u={name:"feedIndex",components:{FeedCard:l["a"],FootGuide:c["a"]},data:function(){return{feed_type:this.$route.params.type,ad:[],feeds:[],pinned:[],maxId:0}},watch:{$route:function(e){var t=e.params.type;Object(r["c"])(t,d)&&t!==this.feed_type&&(this.ad=[],this.feeds=[],this.pinned=[],this.feed_type=t,this.$nextTick(this.$refs.loadmore.beforeRefresh))}},activated:function(){},methods:{onRefresh:function(){var e=a()(regeneratorRuntime.mark(function e(){var t,n,i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/feeds",{params:{type:this.feed_type,limit:15}});case 2:t=e.sent,n=t.data,n=void 0===n?{}:n,i=n.ad,o=n.feeds,a=n.pinned,this.ad=i?s()(i):[],this.feeds=o?s()(o):[],this.pinned=a?s()(a):[],this.maxId=o.length?o[o.length-1].id:0,this.$refs.loadmore.topEnd(!(o.length<15));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),onLoadMore:function(){var e=a()(regeneratorRuntime.mark(function e(){var t,n,i,o,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={type:this.feed_type,limit:15,after:this.maxId},e.next=3,this.$http.get("/feeds",{params:t});case 3:n=e.sent,i=n.data,i=void 0===i?{}:i,o=i.ad,a=i.feeds,r=i.pinned,this.ad=o?s()(this.ad).concat(s()(o)):this.ad,this.feeds=a?s()(this.feeds).concat(s()(a)):this.feeds,this.pinned=r?s()(this.pinned).concat(s()(r)):this.pinned,this.maxId=a.length?a[a.length-1].id:this.maxId,this.$refs.loadmore.bottomEnd(a.length<15);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},beforeRouteEnter:function(e,t,n){var i=e.params.type;d.indexOf(i)>-1?n():n({path:"/feed/new"})},beforeDestroy:function(){this.$store.commit("SAVE_FEED_TYPE","")}},m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav",{staticClass:"m-box m-head-top m-lim-width m-pos-f m-main m-bb1"},[n("ul",{staticClass:"m-box m-flex-grow1 m-aln-center m-justify-center m-flex-base0 m-head-nav"},[n("router-link",{attrs:{tag:"li",to:"/feed/new","active-class":"active",exact:""}},[n("a",[e._v("ÊúÄÊñ∞")])]),n("router-link",{attrs:{tag:"li",to:"/feed/hot","active-class":"active",exact:""}},[n("a",[e._v("ÁÉ≠Èó®")])]),n("router-link",{attrs:{tag:"li",to:"/feed/follow","active-class":"active",exact:""}},[n("a",[e._v("ÂÖ≥Ê≥®")])])],1)]),n("load-more",{ref:"loadmore",staticClass:"p-feed-main",attrs:{onRefresh:e.onRefresh,onLoadMore:e.onLoadMore}},[n("ul",[e._l(e.pinned,function(t){return t.id?n("li",{key:"pinned-feed-"+e.feed_type+"-"+t.id},[n("feed-card",{attrs:{feed:t,pinned:!0}})],1):e._e()}),e._l(e.feeds,function(t){return t.id?n("li",{key:"feed-"+e.feed_type+"-"+t.id},[n("feed-card",{attrs:{feed:t}})],1):e._e()})],2)]),n("foot-guide")],1)},f=[],h=n("XyMi");function p(e){n("eZfg")}var g=!1,v=p,w="data-v-3296644c",k=null,_=Object(h["a"])(u,m,f,g,v,w,k);t["default"]=_.exports},eZfg:function(e,t){},fxnj:function(e,t){!function(t,n){e.exports=n(t)}(window,function(e,t){function n(t,n,i){e.WeixinJSBridge?WeixinJSBridge.invoke(t,s(n),function(e){r(t,e,i)}):d(t,i)}function i(t,n,i){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){i&&i.trigger&&i.trigger(e),r(t,e,n)}):d(t,i||n)}function s(e){return e=e||{},e.appId=A.appId,e.verifyAppId=A.appId,e.verifySignType="sha1",e.verifyTimestamp=A.timestamp+"",e.verifyNonceStr=A.nonceStr,e.verifySignature=A.signature,e}function o(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function a(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}function r(e,t,n){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var i=t.errMsg;i||(i=t.err_msg,delete t.err_msg,i=c(e,i),t.errMsg=i),(n=n||{})._complete&&(n._complete(t),delete n._complete),i=t.errMsg||"",A.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t));var s=i.indexOf(":");switch(i.substring(s+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function c(e,t){var n=e,i=v[n];i&&(n=i);var s="ok";if(t){var o=t.indexOf(":");"confirm"==(s=t.substring(o+1))&&(s="ok"),"failed"==s&&(s="fail"),-1!=s.indexOf("failed_")&&(s=s.substring(7)),-1!=s.indexOf("fail_")&&(s=s.substring(5)),"access denied"!=(s=(s=s.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=s||(s="permission denied"),"config"==n&&"function not exist"==s&&(s="ok"),""==s&&(s="fail")}return n+":"+s}function l(e){if(e){for(var t=0,n=e.length;t<n;++t){var i=e[t],s=g[i];s&&(e[t]=s)}return e}}function d(e,t){if(!(!A.debug||t&&t.isInnerInvoke)){var n=v[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function u(e){if(!(y||b||A.debug||T<"6.0.2"||E.systemType<0)){var t=new Image;E.appId=A.appId,E.initTime=M.initEndTime-M.initStartTime,E.preVerifyTime=M.preVerifyEndTime-M.preVerifyStartTime,B.getNetworkType({isInnerInvoke:!0,success:function(e){E.networkType=e.networkType;var n="https://open.weixin.qq.com/sdk/report?v="+E.version+"&o="+E.isPreVerifyOk+"&s="+E.systemType+"&c="+E.clientVersion+"&a="+E.appId+"&n="+E.networkType+"&i="+E.initTime+"&p="+E.preVerifyTime+"&u="+E.url;t.src=n}})}}function m(){return(new Date).getTime()}function f(t){C&&(e.WeixinJSBridge?"preInject"===w.__wxjsjs__isPreInject?w.addEventListener&&w.addEventListener("WeixinJSBridgeReady",t,!1):t():w.addEventListener&&w.addEventListener("WeixinJSBridgeReady",t,!1))}function h(){B.invoke||(B.invoke=function(t,n,i){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,s(n),i)},B.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})}function p(e){if("string"==typeof e&&e.length>0){var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t}}if(!e.jWeixin){var g={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},v=function(){var e={};for(var t in g)e[g[t]]=t;return e}(),w=e.document,k=w.title,_=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),y=!(!x.match("mac")&&!x.match("win")),b=-1!=_.indexOf("wxdebugger"),C=-1!=_.indexOf("micromessenger"),S=-1!=_.indexOf("android"),I=-1!=_.indexOf("iphone")||-1!=_.indexOf("ipad"),T=function(){var e=_.match(/micromessenger\/(\d+\.\d+\.\d+)/)||_.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),M={initStartTime:m(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},E={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:I?1:S?2:-1,clientVersion:T,url:encodeURIComponent(location.href)},A={},L={_completes:[]},P={state:0,data:{}};f(function(){M.initEndTime=m()});var R=!1,$=[],B={config:function(e){A=e,d("config",e);var t=!1!==A.check;f(function(){if(t)n(g.config,{verifyJsApiList:l(A.jsApiList)},function(){L._complete=function(e){M.preVerifyEndTime=m(),P.state=1,P.data=e},L.success=function(e){E.isPreVerifyOk=0},L.fail=function(e){L._fail?L._fail(e):P.state=-1};var e=L._completes;return e.push(function(){u()}),L.complete=function(t){for(var n=0,i=e.length;n<i;++n)e[n]();L._completes=[]},L}()),M.preVerifyStartTime=m();else{P.state=1;for(var e=L._completes,i=0,s=e.length;i<s;++i)e[i]();L._completes=[]}}),h()},ready:function(e){0!=P.state?e():(L._completes.push(e),!C&&A.debug&&e())},error:function(e){T<"6.0.2"||(-1==P.state?e(P.data):L._fail=e)},checkJsApi:function(e){var t=function(e){var t=e.checkResult;for(var n in t){var i=v[n];i&&(t[i]=t[n],delete t[n])}return e};n("checkJsApi",{jsApiList:l(e.jsApiList)},(e._complete=function(e){if(S){var n=e.checkResult;n&&(e.checkResult=JSON.parse(n))}e=t(e)},e))},onMenuShareTimeline:function(e){i(g.onMenuShareTimeline,{complete:function(){n("shareTimeline",{title:e.title||k,desc:e.title||k,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){i(g.onMenuShareAppMessage,{complete:function(){n("sendAppMessage",{title:e.title||k,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){i(g.onMenuShareQQ,{complete:function(){n("shareQQ",{title:e.title||k,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){i(g.onMenuShareWeibo,{complete:function(){n("shareWeiboApp",{title:e.title||k,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){i(g.onMenuShareQZone,{complete:function(){n("shareQZone",{title:e.title||k,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},onVoiceRecordEnd:function(e){i("onVoiceRecordEnd",e)},playVoice:function(e){n("playVoice",{localId:e.localId},e)},pauseVoice:function(e){n("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){n("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){i("onVoicePlayEnd",e)},uploadVoice:function(e){n("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){n("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){n("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){n("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(S){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e))},getLocation:function(e){},previewImage:function(e){n(g.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){n("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){n("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===R?(R=!0,n("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(R=!1,$.length>0){var t=$.shift();wx.getLocalImgData(t)}},e))):$.push(e)},getNetworkType:function(e){var t=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var i=t.indexOf(":"),s=t.substring(i+1);switch(s){case"wifi":case"edge":case"wwan":e.networkType=s;break;default:e.errMsg="getNetworkType:fail"}}return e};n("getNetworkType",{},(e._complete=function(e){e=t(e)},e))},openLocation:function(e){n("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},n(g.getLocation,{type:e.type||"wgs84"},(e._complete=function(e){delete e.type},e))},hideOptionMenu:function(e){n("hideOptionMenu",{},e)},showOptionMenu:function(e){n("showOptionMenu",{},e)},closeWindow:function(e){n("closeWindow",{},e=e||{})},hideMenuItems:function(e){n("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){n("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){n("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){n("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){n("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(I){var t=e.resultStr;if(t){var n=JSON.parse(t);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},e))},openAddress:function(e){n(g.openAddress,{},(e._complete=function(e){e=a(e)},e))},openProductSpecificView:function(e){n(g.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var t=e.cardList,i=[],s=0,o=t.length;s<o;++s){var a=t[s],r={card_id:a.cardId,card_ext:a.cardExt};i.push(r)}n(g.addCard,{card_list:i},(e._complete=function(e){var t=e.card_list;if(t){for(var n=0,i=(t=JSON.parse(t)).length;n<i;++n){var s=t[n];s.cardId=s.card_id,s.cardExt=s.card_ext,s.isSuccess=!!s.is_succ,delete s.card_id,delete s.card_ext,delete s.is_succ}e.cardList=t,delete e.card_list}},e))},chooseCard:function(e){n("chooseCard",{app_id:A.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))},openCard:function(e){for(var t=e.cardList,i=[],s=0,o=t.length;s<o;++s){var a=t[s],r={card_id:a.cardId,code:a.code};i.push(r)}n(g.openCard,{card_list:i},e)},consumeAndShareCard:function(e){n(g.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},chooseWXPay:function(e){n(g.chooseWXPay,o(e),e)},openEnterpriseRedPacket:function(e){n(g.openEnterpriseRedPacket,o(e),e)},startSearchBeacons:function(e){n(g.startSearchBeacons,{ticket:e.ticket},e)},stopSearchBeacons:function(e){n(g.stopSearchBeacons,{},e)},onSearchBeacons:function(e){i(g.onSearchBeacons,e)},openEnterpriseChat:function(e){n("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)},launchMiniProgram:function(e){n("launchMiniProgram",{targetAppId:e.targetAppId,path:p(e.path),envVersion:e.envVersion},e)},miniProgram:{navigateBack:function(e){e=e||{},f(function(){n("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)})},navigateTo:function(e){f(function(){n("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)})},redirectTo:function(e){f(function(){n("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)})},switchTab:function(e){f(function(){n("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)})},reLaunch:function(e){f(function(){n("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)})},postMessage:function(e){f(function(){n("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)})},getEnv:function(t){f(function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})})}}},O=1,U={};return w.addEventListener("error",function(e){if(!S){var t=e.target,n=t.tagName,i=t.src;if(("IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n)&&-1!=i.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var s=t["wx-id"];if(s||(s=O++,t["wx-id"]=s),U[s])return;U[s]=!0,wx.ready(function(){wx.getLocalImgData({localId:i,success:function(e){t.src=e.localData}})})}}},!0),w.addEventListener("load",function(e){if(!S){var t=e.target,n=t.tagName;if(t.src,"IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var i=t["wx-id"];i&&(U[i]=!1)}}},!0),t&&(e.wx=e.jWeixin=B),B}})},hAM4:function(e,t,n){var i,s,o;(function(n,a){"use strict";s=[],i=a,o="function"===typeof i?i.apply(t,s):i,void 0===o||(e.exports=o)})(0,function(){"use strict";var e={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};function t(e){this.callback=e,this.ticking=!1}function n(e){return e&&"undefined"!==typeof window&&(e===window||e.nodeType)}function i(e){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var t,s,o=e||{};for(s=1;s<arguments.length;s++){var a=arguments[s]||{};for(t in a)"object"!==typeof o[t]||n(o[t])?o[t]=o[t]||a[t]:o[t]=i(o[t],a[t])}return o}function s(e){return e===Object(e)?e:{down:e,up:e}}function o(e,t){t=i(t,o.options),this.lastKnownScrollY=0,this.elem=e,this.tolerance=s(t.tolerance),this.classes=t.classes,this.offset=t.offset,this.scroller=t.scroller,this.initialised=!1,this.onPin=t.onPin,this.onUnpin=t.onUnpin,this.onTop=t.onTop,this.onNotTop=t.onNotTop,this.onBottom=t.onBottom,this.onNotBottom=t.onNotBottom}return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,t.prototype={constructor:t,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},o.prototype={constructor:o,init:function(){if(o.cutsTheMustard)return this.debouncer=new t(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var e=this.classes;for(var t in this.initialised=!1,e)e.hasOwnProperty(t)&&this.elem.classList.remove(e[t]);this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var e=this.elem.classList,t=this.classes;!e.contains(t.pinned)&&e.contains(t.unpinned)||(e.add(t.unpinned),e.remove(t.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var e=this.elem.classList,t=this.classes;e.contains(t.unpinned)&&(e.remove(t.unpinned),e.add(t.pinned),this.onPin&&this.onPin.call(this))},top:function(){var e=this.elem.classList,t=this.classes;e.contains(t.top)||(e.add(t.top),e.remove(t.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var e=this.elem.classList,t=this.classes;e.contains(t.notTop)||(e.add(t.notTop),e.remove(t.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var e=this.elem.classList,t=this.classes;e.contains(t.bottom)||(e.add(t.bottom),e.remove(t.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var e=this.elem.classList,t=this.classes;e.contains(t.notBottom)||(e.add(t.notBottom),e.remove(t.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(e){return Math.max(e.offsetHeight,e.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight)},getElementHeight:function(e){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(e){var t=e<0,n=e+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return t||n},toleranceExceeded:function(e,t){return Math.abs(e-this.lastKnownScrollY)>=this.tolerance[t]},shouldUnpin:function(e,t){var n=e>this.lastKnownScrollY,i=e>=this.offset;return n&&i&&t},shouldPin:function(e,t){var n=e<this.lastKnownScrollY,i=e<=this.offset;return n&&t||i},update:function(){var e=this.getScrollY(),t=e>this.lastKnownScrollY?"down":"up",n=this.toleranceExceeded(e,t);this.isOutOfBounds(e)||(e<=this.offset?this.top():this.notTop(),e+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(e,n)?this.unpin():this.shouldPin(e,n)&&this.pin(),this.lastKnownScrollY=e)}},o.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},o.cutsTheMustard="undefined"!==typeof e&&e.rAF&&e.bind&&e.classList,o})}});
//# sourceMappingURL=feed.js.map
{"version":3,"sources":["webpack:///src/page/feed/feedDetail.vue","webpack:///./src/page/feed/feedDetail.vue?8f1a","webpack:///./src/page/feed/feedDetail.vue","webpack:///src/page/article/ArticleCard.vue","webpack:///./src/page/article/ArticleCard.vue?eb37","webpack:///./src/page/article/ArticleCard.vue","webpack:///src/page/article/ArticleComment.vue","webpack:///./src/page/article/ArticleComment.vue?71dd","webpack:///./src/page/article/ArticleComment.vue","webpack:///src/page/feed/feed.vue","webpack:///./src/page/feed/feed.vue?c89c","webpack:///./src/page/feed/feed.vue"],"names":["feedDetail","ArticleCard","CommentItem","ArticleComment","feedID","CURRENTUSER","user","this","feed","id","val","has_like","images","$http","defaults","baseURL","file","isWechat","replace","reg","link","concat","_this","get","then","_ref","_ref$data","data","feed_content","fetchFeedComments","fetchRewards","getWeChatConfig","catch","back","_this2","after","_ref2","_ref2$data","pinneds","length","pinnedCom","toConsumableArray_default","comments","maxComId","noMoreCom","_this3","_ref3","_ref3$data","_this4","liked","method","url","likeCount","likes","getTime","filter","like","_this5","text","_this6","isMine","_this7","window","location","origin","substr","$route","fullPath","appid","timestamp","signature","noncestr","appList","title","desc","firstImage","shareSuccess","shareCancel","weixin_js_sdk_default","a","error","_this8","bus","$emit","uname","_this9","body","replyUser","post","params","_this10","oldID","fetchFeed","setTimeout","render","_vm","_h","$createElement","_c","_self","attrs","loading","on","on-like","likeFeed","on-share","shareFeed","on-more","moreAction","on-comment","commentFeed","staticClass","slot","click","goBack","xmlns:xlink","xlink:href","src","avatar","_l","img","key","scopedSlots","_u","fn","props","_e","_v","domProps","innerHTML","_s","replaceURI","feedContent","slice","ref","index","class","style","zIndex","_f","time","feed_view_count","rewardFeed","href","reward","count","rew","commentCount","comment","pinned","on-click","replyComment","$event","stopPropagation","fetchComing","staticRenderFns","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","Object","component_normalizer","__webpack_exports__","Boolean","init","_t","goback","preventDefault","handelLike","handelComment","handelShare","handelMore","strLength","str","charCode","i","totalLength","showAll","reply","isShowAll","name","maxh","handelClick","to","directives","rawName","value","bodyLength","expression","FeedCard","FootGuide","type","oval","ad","feeds","$nextTick","$refs","loadmore","beforeRefresh","feed_type","err","bottomEnd","maxId","tag","active-class","exact","onRefresh","onLoadMore","injectStyle","context","__webpack_require__"],"mappings":"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","file":"js/feed.js","sourcesContent":["<template>\n  <article-card\n  :liked=\"liked\"\n  :loading=\"loading\"\n  @on-like=\"likeFeed\"\n  @on-share=\"shareFeed\"\n  @on-more=\"moreAction\"\n  @on-comment=\"commentFeed\"\n  >\n  <header slot=\"head\" class=\"m-box m-justify-bet m-aln-center\">\n    <div class=\"m-box m-flex-grow1 m-aln-center m-flex-base0\">\n      <svg class='m-style-svg m-svg-def' @click='goBack'>\n        <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#base-back\"></use>\n      </svg>\n    </div>\n    <div class=\"m-box-model m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title\">\n      <div class=\"m-avatar-box small\">\n        <img :src=\"user.avatar\">\n      </div>\n    </div>\n    <div class=\"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end\">\n      <svg class='m-style-svg m-svg-def'>\n        <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#base-share\"></use>\n      </svg>\n    </div>\n  </header>\n  <!-- ÂÜÖÂÆπ -->\n  <main class=\"m-flex-shrink1 m-flex-grow1 m-art m-main\">\n    <div class=\"m-art-body\">\n      <async-file\n        v-for=\"img in images\"\n        v-if=\"img.file\"\n        :key=\"img.file\"\n        :file=\"img.file\">\n        <img \n        slot-scope=\"props\"\n        v-if=\"props.src\"\n        :src=\"props.src\">\n        />\n      </async-file>\n      <p class=\"m-text-box\" v-html=\"replaceURI(feedContent)\"></p>\n    </div>\n    <div class=\"m-box m-aln-center m-justify-bet m-art-foot\">\n      <div class=\"m-flex-grow1 m-flex-shrink1 m-box m-aln-center m-art-like-list\">\n        <template v-if='likeCount > 0'>\n          <ul class=\"m-box m-flex-grow0 m-flex-shrink0\">\n            <li \n            :key=\"id\"\n            :style=\"{ zIndex: 5-index }\" \n            v-for=\"({user = {}, id}, index) in likes.slice(0, 5)\"\n            class=\"m-avatar-box tiny\"\n            :class=\"`m-avatar-box-${user.sex}`\">\n              <img :src=\"user.avatar\">\n            </li>\n          </ul>\n          <span>{{ likeCount | formatNum }}‰∫∫ÁÇπËµû</span>\n        </template>\n      </div>\n      <div class=\"m-box-model m-aln-end m-art-info\">\n        <span>ÂèëÂ∏É‰∫é{{ time | time2tips }}</span>\n        <span>{{ feed.feed_view_count || 0 | formatNum }}ÊµèËßà</span>\n      </div>\n    </div>\n    <!-- todo ÊâìËµèÂäüËÉΩ -->\n    <div class=\"m-box-model m-box-center m-box-center-a m-art-reward\">\n      <button class=\"m-art-rew-btn\" @click=\"rewardFeed\">Êâì Ëµè</button>\n      <p class=\"m-art-rew-label\"><a href=\"javascript:;\">{{ reward.count | formatNum }}</a>‰∫∫ÊâìËµèÔºåÂÖ±<a href=\"javascript:;\">{{ ~~(reward.amount)/100 }}</a>ÂÖÉ</p>\n      <ul class=\"m-box m-aln-center m-art-rew-list\">\n        <li \n        :key=\"rew.id\"\n        v-for=\"rew in rewardList\"\n        :class=\"`m-avatar-box-${rew.user.sex}`\"\n        class=\"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny\">\n          <img :src=\"rew.user.avatar\">\n        </li>\n      </ul>\n    </div>\n  </main>\n  <!-- ËØÑËÆ∫ÂàóË°® -->\n  <div class=\"m-box-model m-art-comments\" id=\"comment_list\">\n    <ul class=\"m-box m-aln-center m-art-comments-tabs\">\n      <li>{{ commentCount | formatNum }}Êù°ËØÑËÆ∫</li>\n    </ul>\n    <comment-item\n      @on-click=\"replyComment\"\n      v-for=\"(comment) in pinnedCom\"\n      :pinned=\"true\"\n      :key=\"`pinned-comment-${comment.id}`\"\n      :comment=\"comment\"/>\n    <comment-item\n      @on-click=\"replyComment\"\n      v-for=\"(comment) in comments\"\n      :key=\"comment.id\"\n      :comment=\"comment\"/>\n\n      <div class=\"m-box m-aln-center m-justify-center load-more-box\">\n        <span v-if=\"noMoreCom\" class=\"load-more-ph\">---Ê≤°ÊúâÊõ¥Â§ö---</span>\n        <span v-else class=\"load-more-btn\" @click.stop=\"fetchFeedComments(maxComId)\">\n          {{fetchComing ? \"Âä†ËΩΩ‰∏≠...\" : \"ÁÇπÂáªÂä†ËΩΩÊõ¥Â§ö\"}}\n        </span>\n      </div>\n    </div>\n  </article-card>\n</template>\n<script>\nimport bus from \"@/bus.js\";\nimport Wx from \"weixin-js-sdk\";\nimport wx from \"@/util/share.js\";\nimport ArticleCard from \"@/page/article/ArticleCard.vue\";\nimport CommentItem from \"@/page/article/ArticleComment.vue\";\n\nexport default {\n  name: \"feed-detail\",\n  components: {\n    ArticleCard,\n    CommentItem\n  },\n  data() {\n    return {\n      oldID: 0,\n      feed: {},\n      loading: true,\n      fetching: false,\n\n      comments: [],\n      pinnedCom: [],\n      rewardList: [],\n\n      fetchComing: false,\n      noMoreCom: false,\n      maxComId: 0,\n      config: {\n        appid: \"\",\n        signature: \"\",\n        timestamp: \"\",\n        noncestr: \"\"\n      },\n      appList: [\n        \"onMenuShareQZone\",\n        \"onMenuShareQQ\",\n        \"onMenuShareAppMessage\",\n        \"onMenuShareTimeline\"\n      ],\n      share: {\n        title: \"\",\n        desc: \"\",\n        link: \"\"\n      }\n    };\n  },\n  computed: {\n    feedID() {\n      return this.$route.params.feedID;\n    },\n    CURRENTUSER() {\n      return this.$store.state.CURRENTUSER;\n    },\n    user() {\n      const { user } = this.feed;\n      return user && user.id === this.feed.user_id ? user : {};\n    },\n    isMine() {\n      return this.feed.user_id === this.CURRENTUSER.id;\n    },\n    likes: {\n      get() {\n        return this.feed.likes || [];\n      },\n      set(val) {\n        this.feed.likes = val;\n      }\n    },\n    liked: {\n      get() {\n        return !!this.feed.has_like;\n      },\n      set(val) {\n        this.feed.has_like = val;\n      }\n    },\n    likeCount: {\n      get() {\n        return this.feed.like_count || 0;\n      },\n      set(val) {\n        this.feed.like_count = ~~val;\n      }\n    },\n    commentCount: {\n      get() {\n        return this.feed.feed_comment_count || 0;\n      },\n      set(val) {\n        val > 0, (this.feed.feed_comment_count = val);\n      }\n    },\n    reward() {\n      return this.feed.reward || {};\n    },\n    images() {\n      return this.feed.images || [];\n    },\n    time() {\n      return this.feed.created_at || \"\";\n    },\n    feedContent() {\n      return this.feed.feed_content || \"\";\n    },\n    // ÂàÜ‰∫´Á¨¨‰∏ÄÂº†ÂõæÁâá\n    firstImage() {\n      let images = this.images;\n      if (!images.length) {\n        return \"\";\n      }\n      const file = images[0] || {};\n      return (\n        this.$http.defaults.baseURL + \"/files/\" + file.file + \"?w=300&h=300\"\n      );\n    },\n    isWechat() {\n      return this.$store.state.BROWSER.isWechat;\n    }\n  },\n  methods: {\n    replaceURI(str) {\n      const reg = /(https?|http|ftp|file):\\/\\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g;\n      return str\n        ? str.replace(\n            reg,\n            link =>\n              `<a class=\"m-art-links\" href=\"${link}\" target=\"__blank\">#ÁΩëÈ°µÈìæÊé•#</a>`\n          )\n        : \"\";\n    },\n    shareSuccess() {\n      this.$Message.success(\"ÂàÜ‰∫´ÊàêÂäü\");\n    },\n    shareCancel() {\n      this.$Message.success(\"ÂèñÊ∂àÂàÜ‰∫´\");\n    },\n    fetchFeed() {\n      if (this.fetching) return;\n      this.fetching = true;\n      this.$http\n        .get(`/feeds/${this.feedID}`)\n        .then(({ data = {} }) => {\n          this.feed = data;\n          this.share.title = data.user.name + \"ÁöÑÂä®ÊÄÅ\";\n          this.share.desc = data.feed_content;\n          this.oldID = this.feedID;\n          this.fetching = false;\n          this.fetchFeedComments();\n          this.fetchRewards();\n          if (this.isWechat) {\n            this.getWeChatConfig();\n          }\n        })\n        .catch(() => {\n          this.$router.back();\n        });\n    },\n    fetchFeedComments(after = 0) {\n      if (this.fetchComing) return;\n      this.fetchComing = true;\n      this.$http\n        .get(`/feeds/${this.feedID}/comments`, {\n          params: {\n            after\n          }\n        })\n        .then(({ data: { pinneds = [], comments = [] } }) => {\n          pinneds &&\n            pinneds.length &&\n            (this.pinnedCom = after ? [...this.pinneds, ...pinneds] : pinneds);\n          comments && comments.length\n            ? ((this.comments = after\n                ? [...this.comments, ...comments]\n                : comments),\n              (this.maxComId = comments[comments.length - 1].id))\n            : (this.noMoreCom = true);\n          this.$nextTick(() => {\n            this.fetchComing = false;\n            this.loading = false;\n          });\n        })\n        .catch(() => {\n          this.loading = false;\n          this.fetchComing = false;\n        });\n    },\n    fetchRewards() {\n      this.$http\n        .get(`/feeds/${this.feedID}/rewards`, {\n          params: { limit: 10 }\n        })\n        .then(({ data = [] }) => {\n          this.rewardList = data;\n        });\n    },\n    rewardFeed() {\n      bus.$emit(\"reward:feed\", this.feedID);\n    },\n    likeFeed() {\n      const method = this.liked ? \"delete\" : \"post\";\n      const url = this.liked\n        ? `/feeds/${this.feedID}/unlike`\n        : `/feeds/${this.feedID}/like`;\n      if (this.fetching) return;\n      this.fetching = true;\n      this.$http({\n        method,\n        url,\n        validataStatus: s => s === 201 || s === 204\n      })\n        .then(() => {\n          method === \"post\"\n            ? ((this.liked = true),\n              (this.likeCount += 1),\n              this.likes.length < 5 &&\n                (this.likes = [\n                  ...this.likes,\n                  {\n                    user: this.CURRENTUSER,\n                    id: new Date().getTime(),\n                    user_id: this.CURRENTUSER.id\n                  }\n                ]))\n            : ((this.liked = false),\n              (this.likeCount -= 1),\n              (this.likes = this.likes.filter(like => {\n                return like.user_id !== this.CURRENTUSER.id;\n              })));\n\n          this.fetching = false;\n        })\n        .catch(() => {\n          this.fetching = false;\n        });\n    },\n    commentFeed() {\n      bus.$emit(\"commentInput\", {\n        onOk: text => {\n          this.sendComment({ body: text });\n        }\n      });\n    },\n    shareFeed() {\n      if (this.isWechat) {\n        this.$Message.success(\"ËØ∑‰ΩøÁî®ÂæÆ‰ø°Ëá™Â∏¶ÂàÜ‰∫´üò≥\");\n        return;\n      }\n\n      this.$Message.success(\"Âä†Á¥ßÂºÄÂèë‰∏≠...üò≥\");\n    },\n    moreAction() {\n      const defaultActions = [\n        {\n          text: \"Êî∂Ëóè\",\n          method() {\n            console.log(\"Êî∂Ëóè\");\n          }\n        }\n      ];\n\n      const actions = this.isMine\n        ? [\n            {\n              text: \"Áî≥ËØ∑ÊñáÁ´†ÁΩÆÈ°∂\",\n              method: () => {\n                this.$Message.info(\"ÁΩÆÈ°∂ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ\");\n              }\n            },\n            {\n              text: \"Âà†Èô§\",\n              method: () => {\n                this.$Message.info(\"ËµÑËÆØÂà†Èô§ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ\");\n              }\n            }\n          ]\n        : [\n            {\n              text: \"‰∏æÊä•\",\n              method: () => {\n                this.$Message.info(\"‰∏æÊä•ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ\");\n              }\n            }\n          ];\n      bus.$emit(\"actionSheet\", [...defaultActions, ...actions], \"ÂèñÊ∂à\");\n    },\n    getWeChatConfig() {\n      const url =\n        window.location.origin +\n        process.env.BASE_URL.substr(0, process.env.BASE_URL.length - 1) +\n        this.$route.fullPath;\n      this.share.link = url;\n      if (this.config.appid === \"\") {\n        wx.getOauth(url).then(res => {\n          this.config.timestamp = res.timestamp || \"\";\n          this.config.signature = res.signature || \"\";\n          this.config.appid = res.appid || \"\";\n          this.config.noncestr = res.noncestr || \"\";\n          Wx.config({\n            debug: false,\n            appId: this.config.appid,\n            timestamp: this.config.timestamp,\n            signature: this.config.signature,\n            nonceStr: this.config.noncestr,\n            jsApiList: this.appList\n          });\n          Wx.ready(() => {});\n          Wx.error(() => {\n            // console.log(res);\n          });\n          Wx.onMenuShareTimeline({\n            title: this.share.title,\n            desc: this.share.desc,\n            link: this.share.link,\n            imgUrl: this.firstImage,\n            success: () => {\n              this.shareSuccess();\n            },\n            cancel: () => {\n              this.shareCancel();\n            }\n          });\n          Wx.onMenuShareAppMessage({\n            title: this.share.title,\n            desc: this.share.desc,\n            link: this.share.link,\n            imgUrl: this.firstImage,\n            success: () => {\n              this.shareSuccess();\n            },\n            cancel: () => {\n              this.shareCancel();\n            }\n          });\n          Wx.onMenuShareQQ({\n            title: this.share.title,\n            desc: this.share.desc,\n            link: this.share.link,\n            imgUrl: this.firstImage,\n            success: () => {\n              this.shareSuccess();\n            },\n            cancel: () => {\n              this.shareCancel();\n            }\n          });\n        });\n      } else {\n        this.$Message.success(\"ËØ∑‰ΩøÁî®ÂæÆ‰ø°Ëá™Â∏¶ÂàÜ‰∫´üò≥\");\n        Wx.config({\n          debug: false,\n          appId: this.config.appid,\n          timestamp: this.config.timestamp,\n          signature: this.config.signature,\n          nonceStr: this.config.noncestr,\n          jsApiList: this.appList\n        });\n\n        Wx.ready(() => {}),\n          Wx.error(() => {\n            // console.log(res);\n          });\n        Wx.onMenuShareTimeline({\n          title: this.share.title,\n          desc: this.share.desc,\n          link: this.share.link,\n          imgUrl: this.firstImage,\n          success: () => {\n            this.shareSuccess();\n          },\n          cancel: () => {\n            this.shareCancel();\n          }\n        });\n        Wx.onMenuShareAppMessage({\n          title: this.share.title,\n          desc: this.share.desc,\n          link: this.share.link,\n          imgUrl: this.firstImage,\n          success: () => {\n            this.shareSuccess();\n          },\n          cancel: () => {\n            this.shareCancel();\n          }\n        });\n        Wx.onMenuShareQQ({\n          title: this.share.title,\n          desc: this.share.desc,\n          link: this.share.link,\n          imgUrl: this.firstImage,\n          success: () => {\n            this.shareSuccess();\n          },\n          cancel: () => {\n            this.shareCancel();\n          }\n        });\n      }\n    },\n    replyComment(uid, uname) {\n      uid === this.CURRENTUSER.id\n        ? bus.$emit(\n            \"actionSheet\",\n            [\n              {\n                text: \"Áî≥ËØ∑ËØÑËÆ∫ÁΩÆÈ°∂\",\n                method: () => {\n                  this.$Message.info(\"ÁΩÆÈ°∂ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ\");\n                }\n              },\n              {\n                text: \"Âà†Èô§ËØÑËÆ∫\",\n                method: () => {\n                  this.$Message.info(\"ËØÑËÆ∫Âà†Èô§ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ\");\n                }\n              }\n            ],\n            \"ÂèñÊ∂à\"\n          )\n        : bus.$emit(\"commentInput\", {\n            placeholder: `ÂõûÂ§çÔºö ${uname}`,\n            onOk: text => {\n              this.sendComment({ reply_user: uid, body: text });\n            }\n          });\n    },\n    sendComment({ reply_user: replyUser, body }) {\n      const params = {};\n      if (body && body.length > 0) {\n        params.body = body;\n        replyUser && (params[\"reply_user\"] = replyUser);\n        this.$http\n          .post(`/feeds/${this.feedID}/comments`, params, {\n            validataStatus: s => s === 201\n          })\n          .then(() => {\n            this.$Message.success(\"ËØÑËÆ∫ÊàêÂäü\");\n            bus.$emit(\"commentInput:close\", true);\n          })\n          .catch(() => {\n            this.$Message.error(\"ËØÑËÆ∫Â§±Ë¥•\");\n            bus.$emit(\"commentInput:close\", true);\n          });\n      } else {\n        this.$Message.error(\"ËØÑËÆ∫ÂÜÖÂÆπ‰∏çËÉΩ‰∏∫Á©∫\");\n      }\n    }\n  },\n  activated() {\n    if (this.feedID) {\n      this.feedID !== this.oldID\n        ? this.fetchFeed()\n        : setTimeout(() => {\n            this.loading = false;\n          }, 600);\n    }\n  },\n  deactivated() {\n    this.loading = true;\n    this.share = {\n      title: \"\",\n      desc: \"\",\n      link: \"\"\n    };\n    this.config = {\n      appid: \"\",\n      timestamp: 0,\n      noncestr: \"\",\n      signature: \"\"\n    };\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/page/feed/feedDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article-card',{attrs:{\"liked\":_vm.liked,\"loading\":_vm.loading},on:{\"on-like\":_vm.likeFeed,\"on-share\":_vm.shareFeed,\"on-more\":_vm.moreAction,\"on-comment\":_vm.commentFeed}},[_c('header',{staticClass:\"m-box m-justify-bet m-aln-center\",attrs:{\"slot\":\"head\"},slot:\"head\"},[_c('div',{staticClass:\"m-box m-flex-grow1 m-aln-center m-flex-base0\"},[_c('svg',{staticClass:\"m-style-svg m-svg-def\",on:{\"click\":_vm.goBack}},[_c('use',{attrs:{\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"xlink:href\":\"#base-back\"}})])]),_c('div',{staticClass:\"m-box-model m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title\"},[_c('div',{staticClass:\"m-avatar-box small\"},[_c('img',{attrs:{\"src\":_vm.user.avatar}})])]),_c('div',{staticClass:\"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end\"},[_c('svg',{staticClass:\"m-style-svg m-svg-def\"},[_c('use',{attrs:{\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"xlink:href\":\"#base-share\"}})])])]),_c('main',{staticClass:\"m-flex-shrink1 m-flex-grow1 m-art m-main\"},[_c('div',{staticClass:\"m-art-body\"},[_vm._l((_vm.images),function(img){return (img.file)?_c('async-file',{key:img.file,attrs:{\"file\":img.file},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return (props.src)?_c('img',{attrs:{\"src\":props.src}}):_vm._e()}}])},[_vm._v(\"\\n      />\\n    \")]):_vm._e()}),_c('p',{staticClass:\"m-text-box\",domProps:{\"innerHTML\":_vm._s(_vm.replaceURI(_vm.feedContent))}})],2),_c('div',{staticClass:\"m-box m-aln-center m-justify-bet m-art-foot\"},[_c('div',{staticClass:\"m-flex-grow1 m-flex-shrink1 m-box m-aln-center m-art-like-list\"},[(_vm.likeCount > 0)?[_c('ul',{staticClass:\"m-box m-flex-grow0 m-flex-shrink0\"},_vm._l((_vm.likes.slice(0, 5)),function(ref,index){\nvar user = ref.user; if ( user === void 0 ) user = {};\nvar id = ref.id;\nreturn _c('li',{key:id,staticClass:\"m-avatar-box tiny\",class:(\"m-avatar-box-\" + (user.sex)),style:({ zIndex: 5-index })},[_c('img',{attrs:{\"src\":user.avatar}})])})),_c('span',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.likeCount))+\"‰∫∫ÁÇπËµû\")])]:_vm._e()],2),_c('div',{staticClass:\"m-box-model m-aln-end m-art-info\"},[_c('span',[_vm._v(\"ÂèëÂ∏É‰∫é\"+_vm._s(_vm._f(\"time2tips\")(_vm.time)))]),_c('span',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.feed.feed_view_count || 0))+\"ÊµèËßà\")])])]),_c('div',{staticClass:\"m-box-model m-box-center m-box-center-a m-art-reward\"},[_c('button',{staticClass:\"m-art-rew-btn\",on:{\"click\":_vm.rewardFeed}},[_vm._v(\"Êâì Ëµè\")]),_c('p',{staticClass:\"m-art-rew-label\"},[_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.reward.count)))]),_vm._v(\"‰∫∫ÊâìËµèÔºåÂÖ±\"),_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(_vm._s(~~(_vm.reward.amount)/100))]),_vm._v(\"ÂÖÉ\")]),_c('ul',{staticClass:\"m-box m-aln-center m-art-rew-list\"},_vm._l((_vm.rewardList),function(rew){return _c('li',{key:rew.id,staticClass:\"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny\",class:(\"m-avatar-box-\" + (rew.user.sex))},[_c('img',{attrs:{\"src\":rew.user.avatar}})])}))])]),_c('div',{staticClass:\"m-box-model m-art-comments\",attrs:{\"id\":\"comment_list\"}},[_c('ul',{staticClass:\"m-box m-aln-center m-art-comments-tabs\"},[_c('li',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.commentCount))+\"Êù°ËØÑËÆ∫\")])]),_vm._l((_vm.pinnedCom),function(comment){return _c('comment-item',{key:(\"pinned-comment-\" + (comment.id)),attrs:{\"pinned\":true,\"comment\":comment},on:{\"on-click\":_vm.replyComment}})}),_vm._l((_vm.comments),function(comment){return _c('comment-item',{key:comment.id,attrs:{\"comment\":comment},on:{\"on-click\":_vm.replyComment}})}),_c('div',{staticClass:\"m-box m-aln-center m-justify-center load-more-box\"},[(_vm.noMoreCom)?_c('span',{staticClass:\"load-more-ph\"},[_vm._v(\"---Ê≤°ÊúâÊõ¥Â§ö---\")]):_c('span',{staticClass:\"load-more-btn\",on:{\"click\":function($event){$event.stopPropagation();_vm.fetchFeedComments(_vm.maxComId)}}},[_vm._v(\"\\n        \"+_vm._s(_vm.fetchComing ? \"Âä†ËΩΩ‰∏≠...\" : \"ÁÇπÂáªÂä†ËΩΩÊõ¥Â§ö\")+\"\\n      \")])])],2)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-84483eea\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/feed/feedDetail.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/travis/build/JsonLeex/h5/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./feedDetail.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/travis/build/JsonLeex/h5/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./feedDetail.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-84483eea\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./feedDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/feed/feedDetail.vue\n// module id = null\n// module chunks = ","<template>\n  <transition>\n    <div class=\"m-wrapper m-wbox\">\n      <div class=\"m-box-model m-art-card\">\n        <div ref=\"head\" class=\"m-box-model m-justify-center m-pos-f m-head-top m-main m-bb1 m-lim-width\">\n          <slot name='head'>\n            <header class=\"m-box m-justify-bet m-aln-center\">\n              <div class=\"m-box m-flex-grow1 m-aln-center m-flex-base0\">\n                <svg class='m-style-svg m-svg-def' @click='goback'>\n                  <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#base-back\"></use>\n                </svg>\n              </div>\n              <div class=\"m-box-model m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title\">ËµÑËÆØËØ¶ÊÉÖ</div>\n              <div class=\"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end\">\n                <svg class='m-style-svg m-svg-def'>\n                  <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#base-share\"></use>\n                </svg>\n              </div>\n            </header>\n          </slot>\n        </div>\n        <div v-if=\"loading\" class=\"m-spinner pos-f\">\n          <div></div>\n          <div></div>\n        </div>\n        <main class=\"m-lim-width m-box-model m-art-card-main mt90\">\n          <slot></slot>\n        </main>\n        <footer ref=\"foot\" class=\"m-pos-f m-box m-aln-center m-justify-aro m-bt1 m-art-card-foot\">\n          <slot name='foot'>\n            <a class=\"m-box-model m-aln-center\" @click.prevent=\"handelLike\">\n              <svg class='m-style-svg m-svg-def'>\n                <use :xlink:href=\"liked ? '#feed-like' :'#feed-unlike'\"></use>\n              </svg>\n              <span>ÂñúÊ¨¢</span>\n            </a>\n            <a class=\"m-box-model m-aln-center\"  @click.prevent=\"handelComment\">\n              <svg class='m-style-svg m-svg-def'>\n                <use xlink:href=\"#feed-comment\"></use>\n              </svg>\n              <span>ËØÑËÆ∫</span>\n            </a>    \n            <a class=\"m-box-model m-aln-center\" @click.prevent=\"handelShare\">\n              <svg class='m-style-svg m-svg-def'>\n                <use xlink:href=\"#base-share\"></use>\n              </svg>\n              <span>ÂàÜ‰∫´</span>\n            </a>    \n            <a class=\"m-box-model m-aln-center\" @click.prevent=\"handelMore\">\n              <svg class='m-style-svg m-svg-def'>\n                <use xlink:href=\"#feed-more\"></use>\n              </svg>\n              <span>Êõ¥Â§ö</span>\n            </a>\n          </slot>\n        </footer>\n      </div>\n    </div>\n  </transition>\n</template>\n<script>\nimport HeadRoom from \"headroom.js\";\nexport default {\n  name: \"article-card\",\n  props: {\n    loading: {\n      type: Boolean,\n      default: true\n    },\n    liked: {\n      type: Boolean,\n      default: false\n    }\n  },\n  methods: {\n    handelLike() {\n      this.$emit(\"on-like\");\n    },\n    handelComment() {\n      this.$emit(\"on-comment\");\n    },\n    handelShare() {\n      this.$emit(\"on-share\");\n    },\n    handelMore() {\n      this.$emit(\"on-more\");\n    },\n    goback() {\n      this.$router.go(-1);\n    }\n  },\n  mounted() {\n    this.headroom = new HeadRoom(this.$refs.head, {\n      tolerance: 5,\n      offset: 50,\n      classes: {\n        initial: \"headroom-head\",\n        pinned: \"headroom--headShow\",\n        unpinned: \"headroom--headHide\"\n      }\n    });\n    this.footroom = new HeadRoom(this.$refs.foot, {\n      tolerance: 5,\n      offset: 50,\n      classes: {\n        initial: \"headroom-foot\",\n        pinned: \"headroom--footShow\",\n        unpinned: \"headroom--footHide\"\n      }\n    });\n    this.headroom.init();\n    this.footroom.init();\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/page/article/ArticleCard.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',[_c('div',{staticClass:\"m-wrapper m-wbox\"},[_c('div',{staticClass:\"m-box-model m-art-card\"},[_c('div',{ref:\"head\",staticClass:\"m-box-model m-justify-center m-pos-f m-head-top m-main m-bb1 m-lim-width\"},[_vm._t(\"head\",[_c('header',{staticClass:\"m-box m-justify-bet m-aln-center\"},[_c('div',{staticClass:\"m-box m-flex-grow1 m-aln-center m-flex-base0\"},[_c('svg',{staticClass:\"m-style-svg m-svg-def\",on:{\"click\":_vm.goback}},[_c('use',{attrs:{\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"xlink:href\":\"#base-back\"}})])]),_c('div',{staticClass:\"m-box-model m-flex-grow1 m-aln-center m-flex-base0 m-head-top-title\"},[_vm._v(\"ËµÑËÆØËØ¶ÊÉÖ\")]),_c('div',{staticClass:\"m-box m-flex-grow1 m-aln-center m-flex-base0 m-justify-end\"},[_c('svg',{staticClass:\"m-style-svg m-svg-def\"},[_c('use',{attrs:{\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"xlink:href\":\"#base-share\"}})])])])])],2),(_vm.loading)?_c('div',{staticClass:\"m-spinner pos-f\"},[_c('div'),_c('div')]):_vm._e(),_c('main',{staticClass:\"m-lim-width m-box-model m-art-card-main mt90\"},[_vm._t(\"default\")],2),_c('footer',{ref:\"foot\",staticClass:\"m-pos-f m-box m-aln-center m-justify-aro m-bt1 m-art-card-foot\"},[_vm._t(\"foot\",[_c('a',{staticClass:\"m-box-model m-aln-center\",on:{\"click\":function($event){$event.preventDefault();return _vm.handelLike($event)}}},[_c('svg',{staticClass:\"m-style-svg m-svg-def\"},[_c('use',{attrs:{\"xlink:href\":_vm.liked ? '#feed-like' :'#feed-unlike'}})]),_c('span',[_vm._v(\"ÂñúÊ¨¢\")])]),_c('a',{staticClass:\"m-box-model m-aln-center\",on:{\"click\":function($event){$event.preventDefault();return _vm.handelComment($event)}}},[_c('svg',{staticClass:\"m-style-svg m-svg-def\"},[_c('use',{attrs:{\"xlink:href\":\"#feed-comment\"}})]),_c('span',[_vm._v(\"ËØÑËÆ∫\")])]),_c('a',{staticClass:\"m-box-model m-aln-center\",on:{\"click\":function($event){$event.preventDefault();return _vm.handelShare($event)}}},[_c('svg',{staticClass:\"m-style-svg m-svg-def\"},[_c('use',{attrs:{\"xlink:href\":\"#base-share\"}})]),_c('span',[_vm._v(\"ÂàÜ‰∫´\")])]),_c('a',{staticClass:\"m-box-model m-aln-center\",on:{\"click\":function($event){$event.preventDefault();return _vm.handelMore($event)}}},[_c('svg',{staticClass:\"m-style-svg m-svg-def\"},[_c('use',{attrs:{\"xlink:href\":\"#feed-more\"}})]),_c('span',[_vm._v(\"Êõ¥Â§ö\")])])])],2)])])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1682b8c6\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/article/ArticleCard.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/travis/build/JsonLeex/h5/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ArticleCard.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/travis/build/JsonLeex/h5/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ArticleCard.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1682b8c6\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ArticleCard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/article/ArticleCard.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"m-lim-width m-art-comment\">\n    <div class=\"m-box m-art-comment-wrap\">\n      <avatar :user=\"user\"></avatar>\n      <section class=\"m-box-model m-flex-grow1 m-flex-shrink1 m-art-comment-body\">\n        <header class=\"m-box m-aln-center m-justify-bet m-art-comment-usr\">\n          <h4 class=\"m-flex-grow1 m-flex-shrink1\">{{ user.name }}</h4>\n          <div class=\"m-box m-aln-center\">\n            <span v-if=\"pinned\" class=\"m-art-comment-icon-top\">ÁΩÆÈ°∂</span>\n            <span>{{ time | time2tips }}</span>\n          </div>\n        </header>\n        <article\n        class=\"m-text-box m-art-comment-con\"\n        :class=\"{maxh: !isShowAll}\"\n        @click=\"handelClick\">\n          <template v-if=\"replyUser\">\n            <span class=\"m-art-comment-rep\">\n              ÂõûÂ§ç<router-link :to='`/user/${replyUser.id}`'>{{ replyUser.name }}</router-link>Ôºö\n            </span>\n          </template>\n          {{ body }}\n          <span @click.stop=\"isShowAll = !isShowAll\" v-show=\"bodyLength > 60 && !isShowAll\" class=\"m-text-more\"> >>Êõ¥Â§ö</span>\n        </article>\n      </section>\n    </div>\n  </div>\n</template>\n<script>\n/**\n * Â≠óÁ¨¶‰∏≤ÈïøÂ∫¶ËÆ°ÁÆó(‰ªÖËé∑Âèñ‰∏≠ÊñáÂ≠óÁ¨¶Â≠óÊï∞)\n * @author jsonleex <jsonlseex@163.com>\n * Êåâ 4‰∏™Ëã±ÊñáÂ≠óÁ¨¶ = 1‰∏™‰∏≠ÊñáÂ≠óÁ¨¶ ËÆ°ÁÆó\n */\nfunction strLength(str) {\n  let totalLength = 0;\n  let i = 0;\n  let charCode;\n  for (; i < str.length; i++) {\n    charCode = str.charCodeAt(i);\n    if (charCode < 0x007f) {\n      totalLength = totalLength + 0.25;\n    } else if (charCode >= 0x0080 && charCode <= 0x07ff) {\n      totalLength += 1;\n    } else if (charCode >= 0x0800 && charCode <= 0xffff) {\n      totalLength += 1.5;\n    }\n  }\n  return totalLength;\n}\nexport default {\n  name: \"comment-item\",\n  props: {\n    comment: null,\n    pinned: Boolean\n  },\n  data() {\n    return {\n      showAll: false\n    };\n  },\n  computed: {\n    isShowAll: {\n      get() {\n        return this.bodyLength < 60 || this.showAll;\n      },\n      set(val) {\n        this.showAll = val;\n      }\n    },\n    user() {\n      const { user } = this.comment;\n      return user && user.id ? user : {};\n    },\n    replyUser() {\n      const { reply } = this.comment;\n      return reply && reply.id ? reply : null;\n    },\n    body() {\n      return this.comment.body || \"\";\n    },\n    bodyLength() {\n      return strLength(this.body);\n    },\n    time() {\n      return this.comment.created_at || \"\";\n    }\n  },\n  methods: {\n    handelClick() {\n      if (!this.isShowAll) return (this.isShowAll = !this.isShowAll);\n      this.$emit(\"on-click\", this.user.id, this.user.name, this.comment.id);\n    }\n  },\n  mounted() {\n    this.$store.commit(\"SAVE_USER\", this.user);\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/page/article/ArticleComment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-lim-width m-art-comment\"},[_c('div',{staticClass:\"m-box m-art-comment-wrap\"},[_c('avatar',{attrs:{\"user\":_vm.user}}),_c('section',{staticClass:\"m-box-model m-flex-grow1 m-flex-shrink1 m-art-comment-body\"},[_c('header',{staticClass:\"m-box m-aln-center m-justify-bet m-art-comment-usr\"},[_c('h4',{staticClass:\"m-flex-grow1 m-flex-shrink1\"},[_vm._v(_vm._s(_vm.user.name))]),_c('div',{staticClass:\"m-box m-aln-center\"},[(_vm.pinned)?_c('span',{staticClass:\"m-art-comment-icon-top\"},[_vm._v(\"ÁΩÆÈ°∂\")]):_vm._e(),_c('span',[_vm._v(_vm._s(_vm._f(\"time2tips\")(_vm.time)))])])]),_c('article',{staticClass:\"m-text-box m-art-comment-con\",class:{maxh: !_vm.isShowAll},on:{\"click\":_vm.handelClick}},[(_vm.replyUser)?[_c('span',{staticClass:\"m-art-comment-rep\"},[_vm._v(\"\\n            ÂõûÂ§ç\"),_c('router-link',{attrs:{\"to\":(\"/user/\" + (_vm.replyUser.id))}},[_vm._v(_vm._s(_vm.replyUser.name))]),_vm._v(\"Ôºö\\n          \")],1)]:_vm._e(),_vm._v(\"\\n        \"+_vm._s(_vm.body)+\"\\n        \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bodyLength > 60 && !_vm.isShowAll),expression:\"bodyLength > 60 && !isShowAll\"}],staticClass:\"m-text-more\",on:{\"click\":function($event){$event.stopPropagation();_vm.isShowAll = !_vm.isShowAll}}},[_vm._v(\" >>Êõ¥Â§ö\")])],2)])],1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7dc9842e\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/article/ArticleComment.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/travis/build/JsonLeex/h5/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ArticleComment.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/travis/build/JsonLeex/h5/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ArticleComment.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7dc9842e\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ArticleComment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/article/ArticleComment.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <nav class=\"m-box m-head-top m-lim-width m-pos-f m-main m-bb1\">\n      <ul class=\"m-box m-flex-grow1 m-aln-center m-justify-center m-flex-base0 m-head-nav\">\n        <router-link tag=\"li\" to=\"/feed/new\" active-class=\"active\" exact replace>\n          <a>ÊúÄÊñ∞</a>\n        </router-link>\n        <router-link tag=\"li\" to=\"/feed/hot\" active-class=\"active\" exact replace>\n          <a>ÁÉ≠Èó®</a>\n        </router-link>\n        <router-link tag=\"li\" to=\"/feed/follow\" active-class=\"active\" exact replace>\n          <a>ÂÖ≥Ê≥®</a>\n        </router-link>\n      </ul>\n    </nav>\n    <load-more \n      class=\"p-feed-main\"\n      :onRefresh='onRefresh'\n      :onLoadMore='onLoadMore'\n      ref='loadmore'\n      >\n      <ul>\n        <li v-if=\"feed.id\" v-for=\"feed in pinned\" :key=\"`pinned-feed-${feed_type}-${feed.id}`\">\n          <feed-card :feed=\"feed\" :pinned=\"true\" />\n        </li>\n        <li v-if=\"feed.id\" v-for=\"feed in feeds\" :key=\"`feed-${feed_type}-${feed.id}`\">\n          <feed-card :feed=\"feed\" />\n        </li>\n      </ul>\n    </load-more>\n    <foot-guide></foot-guide>\n  </div>\n</template>\n<script>\nimport FootGuide from \"@/components/FootGuide\";\nimport FeedCard from \"@/components/FeedCard/FeedCard.vue\";\nexport default {\n  name: \"feedIndex\",\n  components: {\n    FeedCard,\n    // FeedItem,\n    FootGuide\n  },\n  data() {\n    return {\n      ad: [], // ÂπøÂëä\n      feeds: [], // Âä®ÊÄÅ\n      pinned: [], // ÁΩÆÈ°∂\n\n      maxId: 0\n    };\n  },\n  computed: {\n    feed_type() {\n      return this.$route.params.type;\n    }\n  },\n  watch: {\n    feed_type(val, oval) {\n      val &&\n        val !== oval &&\n        ((this.ad = []),\n        (this.feeds = []),\n        (this.pinned = []),\n        this.$nextTick(this.$refs.loadmore.beforeRefresh));\n    }\n  },\n  methods: {\n    onRefresh() {\n      this.$http\n        .get(\"/feeds\", {\n          params: {\n            type: this.feed_type,\n            limit: 15\n          }\n        })\n        .then(({ data: { ad, feeds, pinned } = {} }) => {\n          this.ad = ad ? [...ad] : [];\n          this.feeds = feeds ? [...feeds] : [];\n          this.pinned = pinned ? [...pinned] : [];\n          this.maxId = feeds.length ? feeds[feeds.length - 1].id : 0;\n          this.$refs.loadmore.topEnd(!(feeds.length < 15));\n        })\n        .catch(err => {\n          console.log(err);\n          this.$refs.loadmore.topEnd(false);\n        });\n    },\n    onLoadMore() {\n      if (!this.feed_type) return this.$refs.loadmore.bottomEnd();\n      const params = {\n        type: this.feed_type,\n        limit: 15,\n        after: this.maxId\n      };\n      this.$http\n        .get(\"/feeds\", { params })\n        .then(({ data: { ad, feeds, pinned } = {} }) => {\n          this.ad = ad ? [...this.ad, ...ad] : this.ad;\n          this.feeds = feeds ? [...this.feeds, ...feeds] : this.feeds;\n          this.pinned = pinned ? [...this.pinned, ...pinned] : this.pinned;\n          this.maxId = feeds.length ? feeds[feeds.length - 1].id : this.maxId;\n          this.$refs.loadmore.bottomEnd(feeds.length < 15);\n        })\n        .catch(err => {\n          console.log(err);\n          this.$refs.loadmore.bottomEnd(true);\n        });\n    }\n  },\n  mounted() {\n    this.$refs.loadmore.beforeRefresh();\n  },\n  beforeDestroy() {\n    this.$store.commit(\"SAVE_FEED_TYPE\", \"\");\n  }\n};\n</script>\n\n<style scoped>\n.p-feed-main {\n  padding-top: 90px;\n}\n.p-feed-main li + li {\n  margin-top: 10px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/feed/feed.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('nav',{staticClass:\"m-box m-head-top m-lim-width m-pos-f m-main m-bb1\"},[_c('ul',{staticClass:\"m-box m-flex-grow1 m-aln-center m-justify-center m-flex-base0 m-head-nav\"},[_c('router-link',{attrs:{\"tag\":\"li\",\"to\":\"/feed/new\",\"active-class\":\"active\",\"exact\":\"\",\"replace\":\"\"}},[_c('a',[_vm._v(\"ÊúÄÊñ∞\")])]),_c('router-link',{attrs:{\"tag\":\"li\",\"to\":\"/feed/hot\",\"active-class\":\"active\",\"exact\":\"\",\"replace\":\"\"}},[_c('a',[_vm._v(\"ÁÉ≠Èó®\")])]),_c('router-link',{attrs:{\"tag\":\"li\",\"to\":\"/feed/follow\",\"active-class\":\"active\",\"exact\":\"\",\"replace\":\"\"}},[_c('a',[_vm._v(\"ÂÖ≥Ê≥®\")])])],1)]),_c('load-more',{ref:\"loadmore\",staticClass:\"p-feed-main\",attrs:{\"onRefresh\":_vm.onRefresh,\"onLoadMore\":_vm.onLoadMore}},[_c('ul',[_vm._l((_vm.pinned),function(feed){return (feed.id)?_c('li',{key:(\"pinned-feed-\" + _vm.feed_type + \"-\" + (feed.id))},[_c('feed-card',{attrs:{\"feed\":feed,\"pinned\":true}})],1):_vm._e()}),_vm._l((_vm.feeds),function(feed){return (feed.id)?_c('li',{key:(\"feed-\" + _vm.feed_type + \"-\" + (feed.id))},[_c('feed-card',{attrs:{\"feed\":feed}})],1):_vm._e()})],2)]),_c('foot-guide')],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-378b9700\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/feed/feed.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-378b9700\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./feed.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/travis/build/JsonLeex/h5/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./feed.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/travis/build/JsonLeex/h5/node_modules/.cache/cache-loader\\\"}!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./feed.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-378b9700\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./feed.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-378b9700\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/feed/feed.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
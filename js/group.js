webpackJsonp([0],{"+aVZ":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("n12u"),s("EuXz"),s("gbyG"),s("Gh7F");var n=s("ZoQJ"),o=s("BW2B"),i=s("/opv"),a={name:"addGroup",components:{HeadTop:o["a"]},data:function(){return{name:"",header:"",avatar:null,category:{},summary:"",notice:"",money:null,allow_feed:!1,privately:!0,paid:!1}},computed:{disabled:function(){return[this.name,this.header,this.tags].map(function(t){return t.length>0}).includes(!1)},tagsLen:function(){return this.tags.length},tags:function(){return this.$store.state.CUR_SELECTED_TAGS},cur_location:function(){return this.$store.state.CUR_GROUP_LOCATION},location_txt:function(){return this.cur_location.label||""},mode:function(){return this.paid?"paid":this.privately?"private":"public"}},watch:{money:function(t){t<0&&(this.money=0)},privately:function(t){t||(this.paid=t)}},methods:{init:function(){this.name="",this.header="",this.avatar={},this.category="",this.summary="",this.notice="",this.money="",this.$store.state.CUR_SELECTED_TAGS=[],this.$store.state.CUR_GROUP_LOCATION={}},cancel:function(){this.init(),this.$router.go(-1)},addGroup:function(){var t=this,e=this.category.id;if(!e)return this.$Message.error("请选择圈子分类");var s={name:this.name,summary:this.summary,notice:this.notice,mode:this.mode,allow_feed:this.allow_feed};if(this.location){var n=this.cur_location,o=n.lat,a=n.lng;s=Object.assign({},s,{location:this.location_txt,latitude:o,longitude:a,geo_hash:Object(i["a"])(o,a)})}this.avatar.toBlob(function(n){var o=new FormData;o.append("avatar",n),Object.keys(s).forEach(function(t){return o.append(t,s[t])}),"paid"===s.mode&&t.money>0&&o.append("money",t.money),t.tags.forEach(function(t){o.append("tags[][id]",t.id)}),t.$http.post("/plus-group/categories/".concat(e,"/groups"),o,{validateStatus:function(t){return 200===t}}).then(function(){t.$Message.success("创建圈子成功")}).catch(function(e){var s=e.response;s=void 0===s?{}:s;var n=s.data,o=void 0===n?{message:"创建圈子失败"}:n;t.$Message.error(o)})})},chooseImg:function(){this.$refs.uploadFile.click()},getImg:function(t){var e=this,s=t.target.files||t.dataTransfer.files;s.length&&this.$ImgCropper.show({url:Object(n["b"])(s[0]),round:!1,onCancel:function(){e.$refs.uploadFile.value=null},onOk:function(t){e.avatar=t,e.header=t.toDataURL(),e.$refs.uploadFile.value=null}})},toChoose:function(t){t&&this.$router.push("/".concat(t.toLocaleLowerCase()))}},beforeRouteEnter:function(t,e,s){var n=e.params.category;s(function(t){n&&t.init()})}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("head-top",{attrs:{"go-back":t.cancel,title:"创建圈子",append:"true"}},[s("button",{staticClass:"add_group_btn",attrs:{slot:"append",disabled:t.disabled},on:{click:t.addGroup},slot:"append"},[t._v("创建")])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-row header-upload",on:{click:t.chooseImg}},[s("input",{ref:"uploadFile",attrs:{type:"file"},on:{change:t.getImg}}),s("div",{staticClass:"group-header"},[t.header?s("img",{attrs:{src:t.header}}):t._e()]),s("span",[t._v("上传圈子头像")]),s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"name"}},[t._v("圈名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:"输入圈名, 20字以内",maxlength:"20",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),s("div",{staticClass:"form-row"},[s("label",[t._v("分类")]),s("div",{class:["input","ccc",{c333:t.category.id}],on:{click:function(e){t.toChoose("group/add/category")}}},[t._v("\n        "+t._s((t.category||{}).name||"选择圈子类别")+"\n        "),s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]),s("div",{staticClass:"form-row"},[s("label",[t._v("标签")]),s("div",{class:["input","ccc",{c333:t.tagsLen>0}],on:{click:function(e){t.toChoose("tags?redirect=-1")}}},[t.tagsLen>0?[s("div",{staticClass:"tags-list"},t._l(t.tags,function(e){return e.id?s("div",{key:"group-tag-"+e.id,staticClass:"tags-item"},[t._v(t._s(e.name))]):t._e()}))]:[t._v("\n          最多可选5个标签\n        ")],s("v-icon",{attrs:{type:"base-arrow-r"}})],2)]),s("div",{staticClass:"form-row"},[s("label",[t._v("位置")]),s("div",{class:["input","ccc",{c333:t.location_txt}],on:{click:function(e){t.toChoose("location")}}},[t._v("\n        "+t._s(t.location_txt||"设置圈子地理位置")+"\n        "),s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]),s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"summary"}},[t._v("简介")]),s("div",{staticClass:"input auto"},[s("textarea",{directives:[{name:"txtautosize",rawName:"v-txtautosize"},{name:"model",rawName:"v-model",value:t.summary,expression:"summary"}],attrs:{placeholder:"编辑简介",maxlength:"50"},domProps:{value:t.summary},on:{input:function(e){e.target.composing||(t.summary=e.target.value)}}})])])]),s("div",{staticClass:"switch-group"},[s("v-switch",{attrs:{type:"checkbox"},model:{value:t.allow_feed,callback:function(e){t.allow_feed=e},expression:"allow_feed"}},[t._v("帖子同步至动态")]),s("v-switch",{attrs:{type:"checkbox"},model:{value:t.privately,callback:function(e){t.privately=e},expression:"privately"}},[t._v("设置为封闭圈子")]),t.privately?[s("v-switch",{attrs:{"data-value":!0,type:"radio"},model:{value:t.paid,callback:function(e){t.paid=e},expression:"paid"}},[t._v("\n        收费入圈\n        "),t.paid?[s("div",{attrs:{slot:"append"},slot:"append"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],attrs:{type:"number",placeholder:"设置入圈收费金额",pattern:"[0-9]*"},domProps:{value:t.money},on:{input:function(e){e.target.composing||(t.money=e.target.value)}}}),t._v("金币\n          ")])]:t._e()],2),s("v-switch",{attrs:{"data-value":!1,type:"radio"},model:{value:t.paid,callback:function(e){t.paid=e},expression:"paid"}},[t._v("免费入圈")])]:t._e(),s("p",{staticClass:"tips"},[t._v("注: 用户需经圈管理员同意方可加入封闭圈子")])],2),s("div",{staticClass:"form-group notice"},[s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"notice"}},[t._v("公告")]),s("div",{staticClass:"input auto"},[s("textarea",{directives:[{name:"txtautosize",rawName:"v-txtautosize"},{name:"model",rawName:"v-model",value:t.notice,expression:"notice"}],attrs:{placeholder:"选填"},domProps:{value:t.notice},on:{input:function(e){e.target.composing||(t.notice=e.target.value)}}})])])]),s("p",{staticClass:"tips",staticStyle:{"padding-bottom":"30px"}},[t._v("点击创建即代表同意《ThinkSNS+圈子创建协议》")]),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1)],1)},c=[],u=s("XyMi");function l(t){s("A7ki")}var p=!1,d=l,m=null,h=null,f=Object(u["a"])(a,r,c,p,d,m,h);e["default"]=f.exports},"/opv":function(t,e,s){"use strict";e["a"]=r;var n=[16,8,4,2,1],o="0123456789bcdefghjkmnpqrstuvwxyz",i={right:{even:"bc01fg45238967deuvhjyznpkmstqrwx"},left:{even:"238967debc01fg45kmstqrwxuvhjyznp"},top:{even:"p0r21436x8zb9dcf5h7kjnmqesgutwvy"},bottom:{even:"14365h7k9dcfesgujnmqp0r2twvyx8zb"}},a={right:{even:"bcfguvyz"},left:{even:"0145hjnp"},top:{even:"prxz"},bottom:{even:"028b"}};function r(t,e){var s,i=1,a=[],r=[],c=0,u=0,l=12,p="";a[0]=-90,a[1]=90,r[0]=-180,r[1]=180;while(p.length<l)i?(s=(r[0]+r[1])/2,e>s?(u|=n[c],r[0]=s):r[1]=s):(s=(a[0]+a[1])/2,t>s?(u|=n[c],a[0]=s):a[1]=s),i=!i,c<4?c++:(p+=o[u],c=0,u=0);return p}i.bottom.odd=i.left.even,i.top.odd=i.right.even,i.left.odd=i.bottom.even,i.right.odd=i.top.even,a.bottom.odd=a.left.even,a.top.odd=a.right.even,a.left.odd=a.bottom.even,a.right.odd=a.top.even},"0EJr":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=s("XZbU"),a={name:"my-groups-audit-list",components:{GroupFeedItem:i["a"]},data:function(){return{list:[]}},computed:{head:function(){return this.$route.meta.head}},methods:{onRefresh:function(){var t=this;this.$http.get("/plus-group/user-group-posts?limit=15&type=".concat(this.$route.meta.index)).then(function(e){var s=e.data;t.list=o()(s),t.$refs.loadmore.topEnd(!(s.length<15))})},onLoadMore:function(){var t=this;this.$http.get("/plus-group/user-groups",{params:{limit:15,type:"audit",offset:this.list.length}}).then(function(e){var s=e.data;t.list=o()(t.list).concat(o()(s)),t.$refs.loadmore.bottomEnd(s.length<15)})}},mounted:function(){this.$refs.loadmore.beforeRefresh()}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.head?s("head-top",{attrs:{"go-back":!0,title:"我的帖子"}}):t._e(),s("load-more",{ref:"loadmore",attrs:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},t._l(t.list,function(e){return e.id?s("group-feed-item",{key:e.id,attrs:{feed:e}}):t._e()}))],1)},c=[],u=s("XyMi"),l=!1,p=null,d=null,m=null,h=Object(u["a"])(a,r,c,l,p,d,m);e["default"]=h.exports},"1ETD":function(t,e,s){var n=s("kkCw")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},"24l/":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=(s("qwQ3"),s("M4fF")),a=s.n(i),r=s("BW2B"),c=s("v+qG"),u=s("XZbU"),l=[],p={name:"groupSearch",components:{HeadTop:r["a"]},data:function(){return{keyword:"",searchType:"groups",dataList:[]}},computed:{showType:function(){return this.dataList.length>0||!this.showHistory},showHistory:function(){return this.historys.length>0&&!(this.keyword.length>0)},historys:function(){return this.$store.state.SEARCHHISTORY},cur_component:function(){return"groups"===this.searchType?c["a"]:u["a"]}},watch:{searchType:function(){this.dataList=[],this.search()}},methods:{cancel:function(){this.$router.go(-1)},cleanSearchHistorys:function(t){this.$store.commit("CLEAN_SEARCH_HISTORY",t)},historyClick:function(t){this.keyword=t,this.search()},search:a.a.debounce(function(){var t=this;a.a.remove(l,function(t){return null===t.source}),l.forEach(function(t){null!==t&&null!==t.source&&1===t.status&&(t.status=0,t.source.cancel("取消上一个"))});var e={source:t.$http.CancelToken.source(),status:1};if(l.push(e),t.keyword){var s="/plus-group/".concat(t.searchType,"?keyword=").concat(t.keyword);t.$store.commit("ADD_SEARCH_HISTORY",t.keyword),t.$http.get(s,{cancelToken:e.source.token}).then(function(s){var n=s.data,i=void 0===n?[]:n;e.source=null,t.dataList=o()(i)}).catch(function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=s.response;n=void 0===n?{}:n;var o=n.data,i=void 0===o?{message:"搜索失败"}:o;e.source=null,t.$Message.error(i)})}},500)}},d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"group-search"},[s("head-top",{attrs:{append:!0,title:"搜索圈子"}},[s("div",{staticClass:"head-top-cancel",attrs:{slot:"append"},on:{click:t.cancel},slot:"append"},[t._v("取消")]),s("div",{staticClass:"head-top-search",attrs:{slot:"title"},slot:"title"},[s("v-icon",{staticClass:"head-top-search-icon",attrs:{type:"base-search"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"head-top-search-input",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.keyword},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.search(e)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})],1)]),s("div"),t.showType?[s("div",{staticClass:"group-search-nav"},[s("div",{staticClass:"group-search-nav-item",class:{active:"groups"===t.searchType},on:{click:function(e){t.searchType="groups"}}},[t._v("圈子")]),s("div",{staticClass:"group-search-nav-item",class:{active:"group-posts"===t.searchType},on:{click:function(e){t.searchType="group-posts"}}},[t._v("帖子")])])]:t._e(),s("div",{staticClass:"group-search-content",style:{paddingTop:t.showType?".9rem":""}},[t.showHistory?s("div",{staticClass:"group-search-history-list"},[t._l(t.historys,function(e,n){return e?s("div",{key:"history-"+n,staticClass:"group-search-history-item",on:{click:function(s){t.historyClick(e)}}},[s("v-icon",{attrs:{type:"base-circle-time"}}),s("div",{staticClass:"group-search-history-item-label"},[t._v(t._s(e))]),s("v-icon",{attrs:{type:"base-clean"},nativeOn:{click:function(s){s.stopPropagation(),t.cleanSearchHistorys(e)}}})],1):t._e()}),s("div",{ref:"test",staticClass:"group-search-history-item cancel",on:{click:t.cleanSearchHistorys}},[t._v("清空搜索历史")])],2):t._e(),s("div",{staticClass:"group-search-list"},t._l(t.dataList,function(e){return s("div",{key:"search-"+e.id,staticClass:"group-search-item"},[s(t.cur_component,{tag:"component",attrs:{group:e,feed:e}})],1)}))])],2)},m=[],h=s("XyMi");function f(t){s("w2te")}var v=!1,g=f,_=null,y=null,b=Object(h["a"])(p,d,m,v,g,_,y);e["default"]=b.exports},"3seX":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("n12u");var n=s("rzQm"),o=s.n(n),i=(s("SldL"),s("7hDC")),a=s.n(i),r=(s("EuXz"),s("gbyG"),s("Gh7F"),s("ZoQJ")),c=s("BW2B"),u=s("/opv"),l={name:"addGroup",components:{HeadTop:c["a"]},data:function(){return{name:"",header:"",avatar:null,category:{},summary:"",notice:"",money:null,allow_feed:!1,privately:!0,paid:!1,role:"member",groupID:this.$route.params.groupID}},computed:{disabled:function(){return[this.name,this.header,this.tags].map(function(t){return t.length>0}).includes(!1)},tagsLen:function(){return this.tags.length},tags:function(){return this.$store.state.CUR_SELECTED_TAGS},cur_location:function(){return this.$store.state.CUR_GROUP_LOCATION},location_txt:function(){return this.cur_location.label||""},mode:function(){return this.paid?"paid":this.privately?"private":"public"}},watch:{money:function(t){t<0&&(this.money=0)},privately:function(t){t||(this.paid=t)}},methods:{init:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,s,n,i,a,r,c,u,l,p,d,m;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/plus-group/groups/".concat(this.groupID));case 2:e=t.sent,s=e.data,n=s.tags,i=s.mode,a=s.name,r=s.money,c=s.avatar,u=s.notice,l=s.summary,p=s.category,d=s.allow_feed,m=s.joined.role,this.name=a,this.header=c,this.avatar={},this.category=p,this.summary=l,this.notice=u,this.money=r,this.role=m,this.allow_feed=!!d,t.t0=i,t.next="paid"===t.t0?26:"1"===t.t0?28:30;break;case 26:return this.paid=!0,t.abrupt("break",30);case 28:return this.privately=!0,t.abrupt("break",30);case 30:this.$store.state.CUR_SELECTED_TAGS=o()(n),this.$store.state.CUR_GROUP_LOCATION={};case 32:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancel:function(){this.$router.go(-1)},addGroup:function(){var t=this,e=this.category.id;if(!e)return this.$Message.error("请选择圈子分类");var s={name:this.name,summary:this.summary,notice:this.notice,mode:this.mode,allow_feed:this.allow_feed};if(this.location){var n=this.cur_location,o=n.lat,i=n.lng;s=Object.assign({},s,{location:this.location_txt,latitude:o,longitude:i,geo_hash:Object(u["a"])(o,i)})}this.avatar.toBlob(function(e){var n=new FormData;n.append("avatar",e),Object.keys(s).forEach(function(t){return n.append(t,s[t])}),"paid"===s.mode&&t.money>0&&n.append("money",t.money),t.tags.forEach(function(t){n.append("tags[][id]",t.id)}),t.$http.post("/plus-group/groups/".concat(t.groupID),n,{validateStatus:function(t){return 200===t}}).then(function(){t.$Message.success("创建圈子成功")}).catch(function(e){var s=e.response;s=void 0===s?{}:s;var n=s.data,o=void 0===n?{message:"创建圈子失败"}:n;t.$Message.error(o)})})},chooseImg:function(){"member"!==this.role&&this.$refs.uploadFile.click()},getImg:function(t){var e=this,s=t.target.files||t.dataTransfer.files;s.length&&this.$ImgCropper.show({url:Object(r["b"])(s[0]),round:!1,onCancel:function(){e.$refs.uploadFile.value=null},onOk:function(t){e.avatar=t,e.header=t.toDataURL(),e.$refs.uploadFile.value=null}})},toChoose:function(t){"member"!==this.role&&t&&this.$router.push("/".concat(t.toLocaleLowerCase()))}},created:function(){this.init()}},p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("head-top",{attrs:{"go-back":t.cancel,title:"member"===t.role?"圈子详情":"修改资料",append:"member"!==t.role}},[s("button",{staticClass:"add_group_btn",attrs:{slot:"append",disabled:t.disabled},on:{click:t.addGroup},slot:"append"},[t._v("修改")])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-row header-upload",on:{click:t.chooseImg}},[s("input",{ref:"uploadFile",attrs:{type:"file"},on:{change:t.getImg}}),s("div",{staticClass:"group-header"},[t.header?s("img",{attrs:{src:t.header}}):t._e()]),s("span",[t._v("圈子封面")]),s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"name"}},[t._v("圈名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{readonly:"member"===t.role,type:"text",placeholder:"输入圈名, 20字以内",maxlength:"20",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),s("div",{staticClass:"form-row"},[s("label",[t._v("分类")]),s("div",{class:["input","ccc",{c333:t.category.id}],on:{click:function(e){t.toChoose("group/add/category")}}},[t._v("\n        "+t._s((t.category||{}).name||"选择圈子类别")+"\n        "),s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]),s("div",{staticClass:"form-row"},[s("label",[t._v("标签")]),s("div",{class:["input","ccc",{c333:t.tagsLen>0}],on:{click:function(e){t.toChoose("tags?redirect=-1")}}},[t.tagsLen>0?[s("div",{staticClass:"tags-list"},t._l(t.tags,function(e){return e.id?s("div",{key:"group-tag-"+e.id,staticClass:"tags-item"},[t._v(t._s(e.name))]):t._e()}))]:[t._v("\n          最多可选5个标签\n        ")],s("v-icon",{attrs:{type:"base-arrow-r"}})],2)]),s("div",{staticClass:"form-row"},[s("label",[t._v("位置")]),s("div",{class:["input","ccc",{c333:t.location_txt}],on:{click:function(e){t.toChoose("location")}}},[t._v("\n        "+t._s(t.location_txt||"设置圈子地理位置")+"\n        "),s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]),s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"summary"}},[t._v("简介")]),s("div",{staticClass:"input auto"},[s("textarea",{directives:[{name:"txtautosize",rawName:"v-txtautosize"},{name:"model",rawName:"v-model",value:t.summary,expression:"summary"}],attrs:{readonly:"member"===t.role,placeholder:"编辑简介",maxlength:"50"},domProps:{value:t.summary},on:{input:function(e){e.target.composing||(t.summary=e.target.value)}}})])])]),"founder"===t.role?s("div",{staticClass:"switch-group"},[s("v-switch",{attrs:{type:"checkbox"},model:{value:t.allow_feed,callback:function(e){t.allow_feed=e},expression:"allow_feed"}},[t._v("帖子同步至动态")]),s("v-switch",{attrs:{type:"checkbox"},model:{value:t.privately,callback:function(e){t.privately=e},expression:"privately"}},[t._v("设置为封闭圈子")]),t.privately?[s("v-switch",{attrs:{"data-value":!0,type:"radio"},model:{value:t.paid,callback:function(e){t.paid=e},expression:"paid"}},[t._v("\n        收费入圈\n        "),t.paid?[s("div",{attrs:{slot:"append"},slot:"append"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],attrs:{type:"number",placeholder:"设置入圈收费金额",pattern:"[0-9]*"},domProps:{value:t.money},on:{input:function(e){e.target.composing||(t.money=e.target.value)}}}),t._v("金币\n          ")])]:t._e()],2),s("v-switch",{attrs:{"data-value":!1,type:"radio"},model:{value:t.paid,callback:function(e){t.paid=e},expression:"paid"}},[t._v("免费入圈")])]:t._e()],2):t._e(),s("div",{staticClass:"form-group notice"},[s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"notice"}},[t._v("公告")]),s("div",{staticClass:"input auto"},[s("textarea",{directives:[{name:"txtautosize",rawName:"v-txtautosize"},{name:"model",rawName:"v-model",value:t.notice,expression:"notice"}],attrs:{readonly:"member"===t.role,placeholder:"选填"},domProps:{value:t.notice},on:{input:function(e){e.target.composing||(t.notice=e.target.value)}}})])])]),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1)],1)},d=[],m=s("XyMi");function h(t){s("DfJ5")}var f=!1,v=h,g=null,_=null,y=Object(m["a"])(l,p,d,f,v,g,_);e["default"]=y.exports},"7r/Q":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=s("v+qG"),a={name:"my-groups-audit-list",components:{groupItem:i["a"]},data:function(){return{list:[]}},computed:{head:function(){return this.$route.meta.head}},methods:{onRefresh:function(){var t=this;this.$http.get("/plus-group/user-groups?limit=15&type=audit").then(function(e){var s=e.data;t.list=o()(s),t.$refs.loadmore.topEnd(!(s.length<15))})},onLoadMore:function(){var t=this;this.$http.get("/plus-group/user-groups",{params:{limit:15,type:"audit",offset:this.list.length}}).then(function(e){var s=e.data;t.list=o()(t.list).concat(o()(s)),t.$refs.loadmore.bottomEnd(s.length<15)})}},mounted:function(){this.$refs.loadmore.beforeRefresh()}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.head?s("head-top",{attrs:{"go-back":!0,title:"待审核的"}}):t._e(),s("load-more",{key:"audit",ref:"loadmore",attrs:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},t._l(t.list,function(t){return s("group-item",{key:"group-"+t.id,attrs:{group:t,append:!1}})}))],1)},c=[],u=s("XyMi"),l=!1,p=null,d=null,m=null,h=Object(u["a"])(a,r,c,l,p,d,m);e["default"]=h.exports},"9IqW":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=s("XZbU"),a={name:"my-groups-audit-list",components:{GroupFeedItem:i["a"]},data:function(){return{list:[]}},computed:{head:function(){return this.$route.meta.head}},methods:{onRefresh:function(){var t=this;this.$http.get("/plus-group/user-group-posts?limit=15&type=".concat(this.$route.meta.index)).then(function(e){var s=e.data;t.list=o()(s),t.$refs.loadmore.topEnd(!(s.length<15))})},onLoadMore:function(){var t=this;this.$http.get("/plus-group/user-groups",{params:{limit:15,type:"audit",offset:this.list.length}}).then(function(e){var s=e.data;t.list=o()(t.list).concat(o()(s)),t.$refs.loadmore.bottomEnd(s.length<15)})}},mounted:function(){this.$refs.loadmore.beforeRefresh()}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.head?s("head-top",{attrs:{"go-back":!0,title:"我的帖子"}}):t._e(),s("load-more",{ref:"loadmore",attrs:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},t._l(t.list,function(e){return e.id?s("group-feed-item",{key:e.id,attrs:{feed:e}}):t._e()}))],1)},c=[],u=s("XyMi"),l=!1,p=null,d=null,m=null,h=Object(u["a"])(a,r,c,l,p,d,m);e["default"]=h.exports},"9MuD":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=s("BW2B"),a=s("v+qG"),r={name:"groupIndex",components:{HeadTop:i["a"],groupListItem:a["a"]},data:function(){return{joined:[],recommend:[],count:0,clickCount:0}},computed:{showRecommend:function(){return this.recommend.length>0}},methods:{cancel:function(){this.to("/discover")},to:function(t){t="string"===typeof t?{path:t}:t,t&&this.$router.push(t)},createdGroup:function(){this.$router.push("/group/add")},getGroup:function(){var t=this;this.$http.get("/plus-group/user-groups").then(function(e){var s=e.data,n=void 0===s?[]:s;n&&(t.joined=o()(n))}).catch(function(e){var s=e.response;s=void 0===s?{}:s;var n=s.data,o=void 0===n?{message:"获取圈子列表失败"}:n;t.$Message.error(o)}),this.getRec(),this.$http.get("/plus-group/groups/count").then(function(e){var s=e.data.count,n=void 0===s?0:s;t.count=n}).catch(function(t){console.log(t),console.log("获取圈子动态总数失败!")})},getRec:function(){var t=this;this.$http.get("/plus-group/recommend/groups?type=random").then(function(e){var s=e.data,n=void 0===s?[]:s;n&&(t.recommend=o()(n),t.clickCount+=1)})}},created:function(){this.getGroup(),this.$store.dispatch("GET_GROUP_TYPES")}},c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("head-top",{attrs:{"go-back":t.cancel,append:"true",title:"圈子"}},[s("div",{attrs:{slot:"append"},slot:"append"},[s("v-icon",{attrs:{type:"base-search"},nativeOn:{click:function(e){t.to("/group/search")}}}),s("v-icon",{attrs:{type:"group-add"},nativeOn:{click:function(e){t.createdGroup(e)}}})],1)]),s("div",[s("div",{staticClass:"entry__group padding group-count"},[s("div",{staticClass:"entry__item",on:{click:function(e){t.to("/group/all")}}},[s("p",{staticClass:"entry__title"},[s("span",{staticClass:"num"},[t._v(t._s(t.count))]),t._v("个兴趣小组, 等待你的加入")]),s("svg",{staticClass:"entry__item--append"},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-arrow-r"}})])])]),s("div",{staticClass:"group-list-group joined"},[s("div",{staticClass:"group-list-label",on:{click:function(e){t.to("/group/joined")}}},[s("span",[t._v("我加入的")]),s("div",{staticClass:"group-list-more"},[s("span",[t._v("查看更多")]),s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]),t._l(t.joined,function(e){return e.id?s("group-list-item",{key:"group-"+e.id,attrs:{role:!0,group:e}}):t._e()})],2),t.showRecommend?s("div",{staticClass:"group-list-group recommend"},[s("div",{staticClass:"group-list-label"},[s("span",[t._v("热门推荐")]),s("div",{staticClass:"group-list-more",on:{click:t.getRec}},[s("v-icon",{style:{transform:"rotate("+t.clickCount+"turn)"},attrs:{type:"base-refresh"}}),s("span",[t._v("换一批")])],1)]),t._l(t.recommend,function(e){return e.id?s("group-list-item",{key:"group-"+e.id,attrs:{group:e}}):t._e()})],2):t._e()])],1)},u=[],l=s("XyMi");function p(t){s("TJQ2")}var d=!1,m=p,h=null,f=null,v=Object(l["a"])(r,c,u,d,m,h,f);e["default"]=v.exports},A0gO:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=(s("SldL"),s("7hDC")),a=s.n(i),r=s("BW2B"),c=s("v+qG"),u={name:"groupAll",components:{HeadTop:r["a"],groupItem:c["a"]},data:function(){return{cur_cate:0,groups:[],switchStatus:!1,preventRepeatReuqest:!1,showBackStatus:!1,showLoading:!0,touchend:!1,loadTips:"下拉加载更多"}},computed:{categorys:function(){return this.$store.state.GROUPTYPES}},watch:{cur_cate:function(){this.getGroupByCate()}},methods:{cancel:function(){this.$router.go(-1)},to:function(t){t="string"===typeof t?{path:t}:t,t&&this.$router.push(t)},createdGroup:function(){this.$router.push("/group/add")},setlectCurCate:function(t){this.switchStatus=!1,this.cur_cate=t,this.$nextTick(function(){document.getElementById("group-categorys-".concat(t)).scrollIntoViewIfNeeded()})},loaderMore:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,s,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.touchend){t.next=2;break}return t.abrupt("return");case 2:if(!this.preventRepeatReuqest){t.next=4;break}return t.abrupt("return");case 4:return this.showLoading=!0,this.preventRepeatReuqest=!0,this.loadTips="加载中...",t.next=9,this.$http.get("/plus-group/groups?category_id=".concat(this.cur_cate),{params:{offset:this.groups.length}});case 9:if(e=t.sent,s=e.data,n=void 0===s?[]:s,this.groups=n?o()(this.groups).concat(o()(n)):this.groups,this.showLoading=!1,!(n.length<15)){t.next=18;break}return this.touchend=!0,this.loadTips="没有更多",t.abrupt("return",!1);case 18:this.preventRepeatReuqest=!1;case 19:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getGroupByCate:function(){var t=this;this.loadTips="加载中...",this.$http.get("/plus-group/groups?category_id=".concat(this.cur_cate)).then(function(e){var s=e.data;t.groups=s,t.showLoading=!1,s.length<15&&(t.loadTips="没有更多",t.touchend=!0)})}},created:function(){this.getGroupByCate()}},l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"group-all"},[s("head-top",{attrs:{"go-back":t.cancel,title:t.$route.meta.title,append:!0}},[s("div",{attrs:{slot:"append"},slot:"append"},[s("v-icon",{attrs:{type:"base-search"},nativeOn:{click:function(e){t.to("/group/search")}}}),s("v-icon",{attrs:{type:"group-add"},nativeOn:{click:function(e){t.createdGroup(e)}}})],1)]),s("div"),s("div",{staticClass:"group-all-category",class:{open:t.switchStatus}},[s("div",{staticClass:"group-all-category-list"},[s("div",{class:["group-all-category-list-item",{active:0===t.cur_cate}],attrs:{id:"group-categorys-0"},on:{click:function(e){t.setlectCurCate(0)}}},[t._v("全部")]),t._l(t.categorys,function(e){return s("div",{key:"group-categorys-"+e.id,class:["group-all-category-list-item",{active:e.id===t.cur_cate}],attrs:{id:"group-categorys-"+e.id},on:{click:function(s){t.setlectCurCate(e.id)}}},[t._v(t._s(e.name))])})],2),s("div",{staticClass:"group-all-category-switch",on:{click:function(e){t.switchStatus=!0}}},[s("v-icon",{attrs:{type:"base-arrow-r"}})],1)]),s("div",{directives:[{name:"load-more",rawName:"v-load-more",value:t.loaderMore,expression:"loaderMore"}],staticClass:"group-all-content",attrs:{type:"2"}},[t._l(t.groups,function(e){return e.id?s("groupItem",{key:"group-"+e.id,attrs:{group:e}}):t._e()}),t.showLoading||t.touchend?s("div",{staticClass:"load-more--bottom"},[t._v(t._s(t.loadTips))]):t._e()],2)],1)},p=[],d=s("XyMi");function m(t){s("Z77R")}var h=!1,f=m,v=null,g=null,_=Object(d["a"])(u,l,p,h,f,v,g);e["default"]=_.exports},A7D5:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("n12u"),s("SldL");var n=s("7hDC"),o=s.n(n),i=s("BW2B"),a={name:"groupFeedDetail",components:{HeadTop:i["a"]},data:function(){return{title:"",body:"",created_at:"",images:[],comments:[],comments_count:0,liked:!1,likes_count:0,views_count:0,user:{},likesList:[],group:{}}},computed:{groupID:function(){return this.$route.params.groupID},feedID:function(){return this.$route.params.feedID}},methods:{initData:function(){var t=o()(regeneratorRuntime.mark(function t(){var e,s,n,o,i,a,r,c,u,l,p,d,m;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/plus-group/groups/".concat(this.groupID,"/posts/").concat(this.feedID));case 2:e=t.sent,s=e.data,n=s.title,o=s.body,i=s.created_at,a=s.images,r=s.comments,c=s.comments_count,u=s.liked,l=s.likes_count,p=s.views_count,d=s.user,m=s.group,this.title=n,this.body=o,this.created_at=i,this.images=a,this.comments=r,this.comments_count=c,this.liked=u,this.likes_count=l,this.views_count=p,this.user=d,this.group=m;case 26:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getFeedLikes:function(){var t=o()(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/plus-group/group-posts/".concat(this.feedID,"/likes"),{limit:5});case 2:e=t.sent,s=e.data,this.likesList=s;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),to:function(t){t="string"===typeof t?{path:t}:t,t&&this.$router.push(t)},likeFeed:function(){var t=this,e=this.liked?"delete":"post",s=this.liked?this.likes_count-1:this.likes_count+1;this.$http({method:e,url:"/plus-group/group-posts/".concat(this.feedID,"/likes")}).then(function(){t.liked=!t.liked,t.likes_count=s}).catch(function(t){console.log(t)})},commentFeed:function(t,e,s){var n=this;this.$http.post("/plus-group/group-posts/".concat(this.feedID,"/comments"),{body:t,reply_user:e}).then(function(t){var e=t.data;e=void 0===e?{}:e;var o=e.comment;n.comments.unshift(o),n.comments_count+=1,s&&s()}).catch(function(t){var e=t.response;e=void 0===e?{}:e;var o=e.data,i=void 0===o?{message:"评论失败"}:o;n.$Message.error(i),s&&s()})},commentAction:function(t,e,s){if(t===this.$store.state.CURRENTUSER.id)this.showCommentAction(s);else{var n=e&&t?"回复".concat(e):"随便说说";this.showCommentInput({placeholder:n,reply_user:t})}},showCommentAction:function(t){var e=this;this.$Modal.info({render:function(s){var n=this;return s("div",{},[s("button",{on:{click:function(){e.deleteComment(t,n.onOk)}}},"删除"),s("button",{on:{click:function(){e.pinnedComment(t,n.onOk)}}},"申请评论置顶")])},onOk:function(){this.$Modal.remove()}})},showCommentInput:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,s=t,n=s.reply_user;t=Object.assign({},{onOk:function(t){e.commentFeed(t,n,function(){e.$Modal.remove()})}},t),this.$Modal.commentInpt(t)}},created:function(){this.initData(),this.getFeedLikes()}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"group-feed-detail"},[s("head-top",{attrs:{"go-back":!0,title:"帖子详情"}}),s("div",{staticClass:"gfd-head"},[s("h1",[t._v(t._s(t.title))]),s("p",[t._v("来自\n      "),s("a",[t._v(t._s(t.group.name))])])]),s("div",{staticClass:"gfd-body"},[s("div",{staticClass:"gfd-body-content",domProps:{innerHTML:t._s(t.body)}}),s("div",{staticClass:"gfd-body-foot"},[s("div",{staticClass:"gfd-body-l"},[s("div",{staticClass:"gfd-like-list"},t._l(t.likesList,function(t){var e=t.user;return s("div",{key:e.id,staticClass:"gfd-like-list-item"},[s("v-avatar",{attrs:{src:e.avatar,size:"small",sex:e.sex}})],1)})),s("span",[t._v(t._s(t.likes_count)+"人点赞")])]),s("div",{staticClass:"gfd-body-r"},[s("p",[t._v("发布于"+t._s(t._f("time2tips")(t.created_at)))]),s("p",[t._v(t._s(t.views_count)+"人预览")])])])]),s("div",{staticClass:"gfd-foot"},[s("div",{staticClass:"gfd-foot-head"},[t._v("\n      "+t._s(t.comments_count)+"条评论\n    ")]),s("div",{staticClass:"gdf-comment-list"},t._l(t.comments,function(e){return s("div",{key:e.id,staticClass:"gfd-comment-item"},[s("v-avatar",{attrs:{src:e.user.avatar,sex:e.user.sex}}),s("div",{staticClass:"gfd-comment-body"},[s("p",[t._v(t._s(e.user.name))]),s("p",[t._v(t._s(e.body))])])],1)}))]),s("div",{staticClass:"gfd-action"},[s("div",{staticClass:"gfd-action-item",on:{click:t.likeFeed}},[s("v-icon",{attrs:{type:t.liked?"feed-like":"feed-unlike"}}),s("p",[t._v("喜欢")])],1),s("div",{staticClass:"gfd-action-item",on:{click:t.showCommentInput}},[s("v-icon",{attrs:{type:"feed-comment"}}),s("p",[t._v("评论")])],1),s("div",{staticClass:"gfd-action-item"},[s("v-icon",{attrs:{type:"base-share"}}),s("p",[t._v("分享")])],1),s("div",{staticClass:"gfd-action-item"},[s("v-icon",{attrs:{type:"feed-more"}}),s("p",[t._v("更多")])],1)])],1)},c=[],u=s("XyMi");function l(t){s("M1pz")}var p=!1,d=l,m=null,h=null,f=Object(u["a"])(a,r,c,p,d,m,h);e["default"]=f.exports},A7ki:function(t,e){},Akvo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"my-group",methods:{cancel:function(){this.$router.push("/profile")}}},o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile-group"},[s("head-top",{attrs:{"go-back":t.cancel}},[s("div",{staticClass:"head-top-tabs-nav",attrs:{slot:"nav"},slot:"nav"},[s("router-link",{staticClass:"head-top-tabs-nav-item",attrs:{to:"/own/groups"}},[t._v("圈子")]),s("router-link",{staticClass:"head-top-tabs-nav-item",attrs:{to:"/own/posts"}},[t._v("帖子")])],1)]),s("router-view")],1)},i=[],a=s("XyMi");function r(t){s("Touj")}var c=!1,u=r,l=null,p=null,d=Object(a["a"])(n,o,i,c,u,l,p);e["default"]=d.exports},Asc8:function(t,e){},AvIE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("EuXz");var n=s("rzQm"),o=s.n(n),i=(s("SldL"),s("7hDC")),a=s.n(i),r=s("BW2B"),c=s("XZbU"),u=[{type:"latest_post",label:"最新帖子"},{type:"latest_reply",label:"最新回复"}],l={name:"groupDetail",components:{HeadTop:r["a"],GroupFeedItem:c["a"]},data:function(){return{oldID:0,group:{},feeds:[],filterTypes:u,scrollTop:0,menuOpen:!1,filterShow:!1,showAllSummary:!1,filterType:u[0],preventRepeatReuqest:!1,showBackStatus:!1,showLoading:!0,touchend:!1,loadTips:"下拉加载更多"}},computed:{founder:function(){return(this.group.founder||{}).user||{}},bg_cover:function(){return{backgroundImage:"url(".concat(this.avatar,")")}},isMember:function(){return!!this.group.joined},role:function(){return(this.group.joined||{}).role||"member"},groupID:function(){return this.$route.params.groupID},topTranparent:function(){return!(this.scrollTop>110)},translate3d:function(){return{transform:this.menuOpen?"translate(-4.5rem, 0)":"none"}},avatar:function(){return this.group.avatar},summary:function(){var t=this.group.summary||"";return t.length>40&&!this.showAllSummary?t.slice(0,38)+"...":t}},watch:{filterType:function(){this.getGroupFeeds()}},methods:{to:function(t){t&&(t="string"===typeof t?{path:t}:t,this.$router.push(t))},goBack:function(){this.$router.go(-1)},openMenu:function(){this.menuOpen=!0},closeMenu:function(){this.menuOpen=!1},menuMainClick:function(){},getGroupDetail:function(){var t=this;this.groupID?this.$http.get("/plus-group/groups/".concat(this.groupID)).then(function(e){var s=e.data,n=void 0===s?{}:s;t.group=n}):(this.$Message.error("发生了一些错误"),this.goBack())},getGroupFeeds:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,s,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loadTips="加载中...",t.next=3,this.$http.get("/plus-group/groups/".concat(this.groupID,"/posts"),{params:{type:this.filterType.type}});case 3:e=t.sent,s=e.data,s=void 0===s?{}:s,n=s.posts,i=s.pinned,this.feeds=n?o()(n):[],this.pinned=i?o()(i):[],this.showLoading=!1,this.feeds.length===this.group.posts_count&&(this.loadTips="没有更多",this.touchend=!0);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loaderMore:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,s,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.touchend){t.next=2;break}return t.abrupt("return");case 2:if(!this.preventRepeatReuqest){t.next=4;break}return t.abrupt("return");case 4:if(this.showLoading=!0,this.preventRepeatReuqest=!0,this.loadTips="加载中...",e=this.$http.get("/plus-group/groups/".concat(this.groupID,"/posts"),{params:{type:this.filterType.type,offset:this.feeds.length}}),s=e.data,n=s.posts,i=s.pinneds,this.feeds=o()(this.feeds).concat(o()(n)),this.pinneds=o()(this.pinneds).concat(o()(i)),this.showLoading=!1,this.feeds.length!==this.group.posts_count){t.next=15;break}return this.touchend=!0,this.loadTips="没有更多",t.abrupt("return",!1);case 15:this.preventRepeatReuqest=!1;case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),joinGroup:function(){var t=this;this.$http.put("/plus-group/groups/".concat(this.groupID)).then(function(e){var s=e.data;t.$Message.success(s),t.getGroupDetail()}).catch(function(e){var s=e.response;s=void 0===s?{}:s;var n=s.data,o=void 0===n?{message:"申请失败 可能是已经申请过了"}:n;t.$Message.error(o)})},exitGroup:function(){var t=this;this.$http.delete("/plus-group/groups/".concat(this.groupID,"/exit")).then(function(){t.$Message.success("退出成功"),t.goBack()}).catch(function(e){var s=e.response;s=void 0===s?{}:s;var n=s.data,o=void 0===n?{message:"申请失败 可能是已经申请过了"}:n;t.$Message.error(o)})},contactFounder:function(){console.log("私聊")},selectFilterType:function(t){this.filterType=t},showFilter:function(){this.filterShow=!this.filterShow},beforeToPost:function(){if(!this.isMember)return this.$Modal.info({content:'你需要先加入"'.concat(this.group.name,'"才能发布圈内帖子'),cancelText:"知道了"});this.$router.push({name:"postGroupFeed",params:{groupID:this.group.id}})},init:function(){this.getGroupDetail(),this.getGroupFeeds()}},activated:function(){this.groupID!==this.oldID&&this.init()},beforeRouteEnter:function(t,e,s){s(function(e){e.oldID=t.params.groupID})},mounted:function(){var t=this;this.init(),this.$el.addEventListener("scroll",function(){t.scrollTop=t.$el.scrollTop})}},p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"group-detail"},[s("div",{staticClass:"main",style:t.translate3d},[s("head-top",{attrs:{"go-back":t.goBack,append:!0,transparent:t.topTranparent}},[s("div",{attrs:{slot:"append"},slot:"append"},[s("v-icon",{attrs:{type:"base-search"},nativeOn:{click:function(e){t.to("/group/search")}}}),s("v-icon",{attrs:{type:"base-share"}}),s("v-icon",{attrs:{type:"feed-more"},nativeOn:{click:function(e){t.openMenu(e)}}})],1)]),s("div",{staticClass:"group-detail-info"},[s("div",{staticClass:"group-detail-bgcover"},[s("div",{staticClass:"bg-blur",style:t.bg_cover}),s("div",{staticClass:"group-detail-base"},[s("div",{staticClass:"group-detail-avatar"},[s("img",{attrs:{src:t.avatar}})]),s("div",{staticClass:"group-detail-txt"},[s("h3",[t._v(t._s(t.group.name))]),s("p",[s("span",[t._v("成员")]),s("span",[t._v(t._s(t.group.users_count))])]),s("p",[s("span",[t._v("位置")]),s("span",{staticClass:"ellipsis"},[t._v(t._s("位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置位置"))])])]),s("div",{staticClass:"group-detail-action"},[t.isMember?t._e():s("a",{staticClass:"group-detail-action-btn join",attrs:{href:"#"},on:{click:t.joinGroup}},[s("v-icon",{attrs:{type:"foot-plus"}}),t._v("加入\n              ")],1)])])]),s("div",{staticClass:"group-detail-other"},[s("div",{staticClass:"group-detail-other-row"},[s("div",{staticClass:"group-detail-other-label"},[t._v("圈主")]),s("div",{staticClass:"group-detail-other-content"},[s("span",[t._v(t._s(t.founder.name))]),s("a",{staticClass:"contactFounder",attrs:{href:"#"},on:{click:function(e){e.stopPropagation(),t.contactFounder(e)}}},[t._v("私聊")])])]),s("div",{staticClass:"group-detail-other-row",class:{"flex-start":t.summary.length>40}},[s("div",{staticClass:"group-detail-other-label"},[t._v("简介")]),s("div",{staticClass:"group-detail-other-content noborder summary"},[s("p",[s("span",[t._v(t._s(t.summary))]),t.summary.length>40?s("a",{attrs:{href:"#"},on:{click:function(e){e.stopPropagation(),t.showAllSummary=!t.showAllSummary}}},[t._v(t._s(t.showAllSummary?" 收起":"查看更多"))]):t._e()])])])]),s("div",{staticClass:"group-detail-feeds"},[s("div",{staticClass:"group-detail-feeds-label"},[s("span",[t._v(t._s(t.group.posts_count)+"个帖子")]),s("div",{staticClass:"group-detail-feeds-filter-wrap"},[s("div",{staticClass:"group-detail-feeds-filter",on:{click:t.showFilter}},[s("span",[t._v(t._s(t.filterType.label))]),s("v-icon",{attrs:{type:"base-filter-list"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.filterShow,expression:"filterShow"}],staticClass:"group-detail-feeds-filter-select",on:{click:t.showFilter}},t._l(t.filterTypes,function(e){return s("div",{key:e.label,staticClass:"group-detail-feeds-filter-option",class:{active:e.type===t.filterType.type},on:{click:function(s){t.selectFilterType(e)}}},[s("span",[t._v(t._s(e.label))]),s("v-icon",{attrs:{type:"base-checked"}})],1)}))])]),s("div",{directives:[{name:"load-more",rawName:"v-load-more",value:t.loaderMore,expression:"loaderMore"}],attrs:{type:"2"}},[t._l(t.feeds,function(e){return e.id?s("group-feed-item",{key:"group-feed-"+t.groupID+"-"+e.id,attrs:{feed:e}}):t._e()}),t.showLoading||t.touchend?s("div",{staticClass:"load-more--bottom"},[t._v(t._s(t.loadTips))]):t._e()],2)])]),s("div",{staticClass:"group-detail-post-btn",on:{click:t.beforeToPost}},[s("v-icon",{attrs:{type:"foot-plus"}})],1)],1),s("div",{staticClass:"menu-wrap",class:{menuOpen:t.menuOpen},on:{click:t.closeMenu}},[s("div",{staticClass:"menu-main",on:{click:function(e){e.stopPropagation(),t.menuMainClick(e)}}},[s("div",{staticClass:"menu"},[s("div",{staticClass:"menu-item"},[t._v("\n            更多操作\n          ")]),s("router-link",{staticClass:"menu-item",attrs:{to:"member",append:""}},[s("v-icon",{staticClass:"menu-item-prepend",attrs:{type:"group-member"}}),s("div",{staticClass:"menu-item-title"},[t._v("成员")]),s("div",{staticClass:"menu-item-tips"},[t._v(t._s(t.group.users_count))]),s("v-icon",{staticClass:"menu-item-append",attrs:{type:"base-arrow-r"}})],1),s("router-link",{staticClass:"menu-item",attrs:{to:"info",append:""}},[s("v-icon",{staticClass:"menu-item-prepend",attrs:{type:"group-info"}}),s("div",{staticClass:"menu-item-title"},[t._v("详细信息")]),s("v-icon",{staticClass:"menu-item-append",attrs:{type:"base-arrow-r"}})],1),"founder"===t.role?s("div",{staticClass:"menu-item",on:{click:function(e){t.to("/group/"+t.groupID+"/permissions")}}},[s("v-icon",{staticClass:"menu-item-prepend",attrs:{type:"group-permissions"}}),s("div",{staticClass:"menu-item-title"},[t._v("发帖权限")]),s("v-icon",{staticClass:"menu-item-append",attrs:{type:"base-arrow-r"}})],1):t._e(),"member"!==t.role?s("div",{staticClass:"menu-item"},[s("v-icon",{staticClass:"menu-item-prepend",attrs:{type:"group-report"}}),s("div",{staticClass:"menu-item-title"},[t._v("举报管理")]),s("v-icon",{staticClass:"menu-item-append",attrs:{type:"base-arrow-r"}})],1):t._e(),s("a",{staticClass:"menu-exit-group",on:{click:t.exitGroup}},[t._v(t._s("founder"===t.role?"转让圈子":"退出圈子"))])],1)])])])},d=[],m=s("XyMi");function h(t){s("zcKR")}var f=!1,v=h,g=null,_=null,y=Object(m["a"])(l,p,d,f,v,g,_);e["default"]=y.exports},DfJ5:function(t,e){},Gh7F:function(t,e,s){"use strict";var n=s("Ds5P"),o=s("kqpo"),i="includes";n(n.P+n.F*s("1ETD")(i),"String",{includes:function(t){return!!~o(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},GkDA:function(t,e){},"HMK/":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("mJx5"),s("SldL");var n=s("7hDC"),o=s.n(n),i=s("BW2B"),a={name:"groupPermissions",components:{HeadTop:i["a"]},data:function(){return{options:[{label:"所有成员",val:3},{label:"仅圈主",val:1},{label:"仅圈主和管理员",val:2}],curSelect:3}},methods:{postData:function(){var t=o()(regeneratorRuntime.mark(function t(e){var s,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e,t.next=3===t.t0?3:1===t.t0?5:2===t.t0?7:9;break;case 3:return s=["member","administrator","founder"],t.abrupt("break",9);case 5:return s=["founder"],t.abrupt("break",9);case 7:return s=["administrator","founder"],t.abrupt("break",9);case 9:return t.next=11,this.$http.patch("/plus-group/groups/".concat(this.$route.params.groupID,"/permissions"),{permissions:s});case 11:n=t.sent,o=n.status,204===o&&(this.curSelect=e);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),initData:function(){var t=o()(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/plus-group/groups/".concat(this.$route.params.groupID));case 2:e=t.sent,s=e.data.permissions,this.curSelect=s.split(",").length;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.initData()}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"group-permissions"},[s("head-top",{attrs:{"go-back":!0,title:"发帖权限设置"}}),s("div",{staticClass:"group-permissions-list"},t._l(t.options,function(e){return s("div",{key:e.label,staticClass:"group-permissions-list-item",on:{click:function(s){t.postData(e.val)}}},[s("span",[t._v(t._s(e.label))]),t.curSelect===e.val?s("v-icon",{attrs:{type:"base-checked",width:".32",height:".32",color:"#70b0ad"}}):t._e()],1)}))],1)},c=[],u=s("XyMi");function l(t){s("s8NT")}var p=!1,d=l,m=null,h=null,f=Object(u["a"])(a,r,c,p,d,m,h);e["default"]=f.exports},Leal:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"my-group-posts",data:function(){return{navs:[{path:"/own/posts/1",title:"我发布的"},{path:"/own/posts/2",title:"已置顶的"},{path:"/own/posts/3",title:"置顶待审核"}]}},computed:{activeTab:function(){return this.$route.path}}},o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav-tabs",{attrs:{fixed:!0,navs:t.navs,value:t.activeTab}})},i=[],a=s("XyMi"),r=!1,c=null,u=null,l=null,p=Object(a["a"])(n,o,i,r,c,u,l);e["default"]=p.exports},Lij7:function(t,e){},M1pz:function(t,e){},O3sG:function(t,e){},O7VB:function(t,e){},Smtm:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=s("v+qG"),a={name:"my-groups-join-list",components:{groupItem:i["a"]},data:function(){return{list:[]}},computed:{head:function(){return this.$route.meta.head}},methods:{onRefresh:function(){var t=this;this.$http.get("/plus-group/user-groups",{params:{limit:15,type:"join"}}).then(function(e){var s=e.data;t.list=o()(s),t.$refs.loadmore.topEnd(!(s.length<15))})},onLoadMore:function(){var t=this;this.$http.get("/plus-group/user-groups",{params:{limit:15,type:"join",offset:this.list.length}}).then(function(e){var s=e.data;t.list=o()(t.list).concat(o()(s)),t.$refs.loadmore.bottomEnd(s.length<15)})}}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.head?s("head-top",{attrs:{"go-back":!0,title:"我加入的"}}):t._e(),s("load-more",{key:"join",ref:"loadmore",attrs:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},t._l(t.list,function(t){return s("group-item",{key:"group-"+t.id,attrs:{group:t,role:!0,append:!0}})}))],1)},c=[],u=s("XyMi"),l=!1,p=null,d=null,m=null,h=Object(u["a"])(a,r,c,l,p,d,m);e["default"]=h.exports},TJQ2:function(t,e){},Touj:function(t,e){},TpOj:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("EuXz"),s("n12u");var n=s("NYxO"),o=s("BW2B"),i={name:"chooseCategory",components:{HeadTop:o["a"]},computed:Object.assign({},Object(n["d"])({types:function(t){return t.GROUPTYPES}}),{choosed:function(){return this.$parent.category}}),methods:{ok:function(t){this.$parent.category=t,this.$Message.success({Message:"已选择 ".concat(t.name," 分类 ")}),this.$router.go(-1)}}},a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"full-page"},[s("head-top",{attrs:{"go-back":!0,title:t.$route.meta.title}}),s("div",{staticClass:"group--types-list"},t._l(t.types,function(e){return e.id?s("div",{key:"group--type-"+e.id,staticClass:"group--types-list-item ellipsis",class:{active:e.id===t.choosed},on:{click:function(s){t.ok(e)}}},[t._v("\n            "+t._s(e.name)+"\n        ")]):t._e()}))],1)},r=[],c=s("XyMi");function u(t){s("Um6O")}var l=!1,p=u,d=null,m=null,h=Object(c["a"])(i,a,r,l,p,d,m);e["default"]=h.exports},Um6O:function(t,e){},WpRU:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=(s("SldL"),s("7hDC")),a=s.n(i),r=s("M4fF"),c=s.n(r),u=s("BW2B"),l=s("ZoQJ"),p=["member","administrator","founder"],d={name:"groupMemberItem",props:{user:Object,groupID:{type:[Number,String],default:function(){return this.$route.params.groupID}},rule:{type:String,validator:function(t){return Object(l["c"])(t,p)},required:!0}},data:function(){return{showAction:!1}},computed:{role:function(){var t=this.user.role;switch(t){case"member":return!1;case"administrator":return"管理员";case"founder":return"圈主"}},userInfo:function(){return this.user.user},actions:function(){var t=this,e=[];switch(this.rule){case"member":return!1;case"administrator":switch(t.user.role){case"member":e=[{label:"移除圈子",action:function(){t.deleteMember()}},{label:t.user.disabled?"移除黑名单":"加入黑名单",action:function(){t.addToBlockList()}}];break;case"administrator":return!1}break;case"founder":switch(t.user.role){case"member":e=[{label:"设置圈管理",action:function(){t.setManger()}},{label:"移除圈子",action:function(){t.deleteMember()}},{label:t.user.disabled?"移除黑名单":"加入黑名单",action:function(){t.addToBlockList()}}];break;case"administrator":e=[{label:"移除圈管理",action:function(){t.setManger()}}];break}break}return e}},methods:{showActions:function(){this.showAction=!this.showAction},setManger:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,s,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="administrator"===this.user.role?"delete":"put",t.next=3,this.$http({method:e,url:"/plus-group/groups/".concat(this.groupID,"/managers/").concat(this.user.id)});case 3:s=t.sent,n=s.status,201===n&&(this.showActions(),this.$emit("update")),204===n&&(this.showActions(),this.$emit("update"));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),deleteMember:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.delete("/plus-group/groups/".concat(this.groupID,"/members/").concat(this.user.id));case 2:e=t.sent,s=e.status,204===s&&this.$emit("on-delete",this.user);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addToBlockList:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,s,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.user.disabled?"delete":"put",t.next=3,this.$http({method:e,url:"/plus-group/groups/".concat(this.groupID,"/blacklist/").concat(this.user.id)});case 3:s=t.sent,n=s.status,201===n&&(this.showActions(),this.$emit("update")),204===n&&(this.showActions(),this.$emit("update"));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.userInfo.id?s("div",{staticClass:"group-member-item"},[s("div",{staticClass:"group-member-item-info"},[s("v-avatar",{attrs:{src:t.userInfo.avatar,sex:t.userInfo.sex}}),s("span",{staticClass:"group-member-name"},[t._v(t._s(t.userInfo.name))]),"member"!==t.user.role?s("span",{class:["group-member-role",t.user.role]},[t._v(t._s(t.role))]):t._e()],1),t.actions?s("div",{staticClass:"group-member-action"},[t.showAction?s("div",{staticClass:"group-member-action-list"},t._l(t.actions,function(e){return s("div",{key:e.label,staticClass:"group-member-action-item",on:{click:e.action}},[t._v(t._s(e.label))])})):t._e(),s("v-icon",{attrs:{type:"feed-more",color:"#b3b3b3"},nativeOn:{click:function(e){t.showActions(e)}}})],1):t._e()]):t._e()},h=[],f=s("XyMi");function v(t){s("Lij7")}var g=!1,_=v,y=null,b=null,k=Object(f["a"])(d,m,h,g,_,y,b),C=k.exports,w=[],$={name:"groupMember",components:{HeadTop:u["a"],groupMemberItem:C},data:function(){return{groupID:this.$route.params.groupID,rule:this.$route.params.rule||"member",members:[],manager:[],blacklist:[],keyword:"",searchList:[]}},methods:{cancel:function(){this.$router.go(-1)},search:c.a.debounce(function(){var t=this;c.a.remove(w,function(t){return null===t.source}),w.forEach(function(t){null!==t&&null!==t.source&&1===t.status&&(t.status=0,t.source.cancel("取消上一个"))});var e={source:t.$http.CancelToken.source(),status:1};w.push(e),t.keyword&&t.$http.get("/plus-group/groups/".concat(t.groupID,"/members?keyword=").concat(t.keyword),{cancelToken:e.source.token}).then(function(){e.source=null}).catch(function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=s.response;n=void 0===n?{}:n;var o=n.data,i=void 0===o?{message:"搜索失败"}:o;e.source=null,t.$Message.error(i)})},500),getMember:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,s,n,i,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.groupID){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this.$http.get("/plus-group/groups/".concat(this.groupID,"/members?type=member"));case 4:return e=t.sent,s=e.data,this.members=s?o()(s):[],t.next=9,this.$http.get("/plus-group/groups/".concat(this.groupID,"/members?type=manager"));case 9:return n=t.sent,i=n.data,this.manager=i?o()(i):[],t.next=14,this.$http.get("/plus-group/groups/".concat(this.groupID,"/members?type=blacklist"));case 14:a=t.sent,r=a.data,this.blacklist=r?o()(r):[];case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.groupID||(this.$router.go(-1),this.$Message.error("发生了一些错误")),this.getMember()}},x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"router-fadeInRight",mode:"out-in"}},[s("div",{staticClass:"group-member"},[s("head-top",{attrs:{title:"成员管理",append:!0}},[s("div",{staticClass:"head-top-cancel",attrs:{slot:"append"},on:{click:t.cancel},slot:"append"},[t._v("取消")]),s("div",{staticClass:"head-top-search",attrs:{slot:"title"},slot:"title"},[s("v-icon",{staticClass:"head-top-search-icon",attrs:{type:"base-search"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"head-top-search-input",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.search]}})],1)]),t.keyword.length+t.searchList.length>0?s("div",{staticClass:"group-member-search"}):s("div",{staticClass:"group-member-lists"},[s("div",{staticClass:"group-member-list  admin"},[s("p",{staticClass:"group-member-label"},[t._v("圈管理("+t._s(t.manager.length)+")")]),t._l(t.manager,function(e){return s("groupMemberItem",{key:e.id,attrs:{user:e,rule:t.rule},on:{update:t.getMember,"on-delete":t.getMember}})})],2),s("div",{staticClass:"group-member-list member"},[s("p",{staticClass:"group-member-label"},[t._v("成员("+t._s(t.members.length)+")")]),t._l(t.members,function(e){return s("groupMemberItem",{key:e.id,attrs:{user:e,rule:t.rule},on:{update:t.getMember,"on-delete":t.getMember}})})],2),s("div",{staticClass:"group-member-list blacklist"},[s("p",{staticClass:"group-member-label"},[t._v("黑名单("+t._s(t.blacklist.length)+")")]),t._l(t.blacklist,function(e){return s("groupMemberItem",{key:e.id,attrs:{user:e,rule:t.rule},on:{update:t.getMember,"on-delete":t.getMember}})})],2)])],1)])},M=[];function O(t){s("znu7")}var R=!1,T=O,I=null,j=null,L=Object(f["a"])($,x,M,R,T,I,j);e["default"]=L.exports},Wq5o:function(t,e){},XZbU:function(t,e,s){"use strict";var n=s("14gb"),o={computed:{text:function(){return this.feed.summary},title:function(){return this.feed.title},hasLike:function(){return this.feed.liked},likeCount:function(){return this.feed.likes_count},viewCount:function(){return this.feed.views_count},commentCount:function(){return this.feed.comments_count}},methods:{viewFeed:function(){this.$router.push("/group/".concat(this.feed.group_id,"/feed/").concat(this.feed.id))},formatData:function(){console.log("format data")},likeFeed:function(){var t=this,e=this.hasLike?"delete":"post",s=this.hasLike?this.feed.likes_count-1:this.feed.likes_count+1;this.$http({method:e,url:"/plus-group/group-posts/".concat(this.feed.id,"/likes")}).then(function(){t.feed.liked=!t.feed.liked,t.feed.likes_count=s}).catch(function(t){console.log(t)})},moreAction:function(){console.log("更多操作")},commentFeed:function(t,e,s){var n=this;this.$http.post("/plus-group/group-posts/".concat(this.feed.id,"/comments"),{body:t,reply_user:e}).then(function(t){var e=t.data;e=void 0===e?{}:e;var o=e.comment;n.feed.comments.unshift(o),n.feed.comments_count+=1,s&&s()}).catch(function(t){var e=t.response;e=void 0===e?{}:e;var o=e.data,i=void 0===o?{message:"评论失败"}:o;n.$Message.error(i),s&&s()})},deleteComment:function(t){console.log("删除评论:",t)},pinnedComment:function(t){console.log("申请评论置顶:",t)}}},i=(s("VjuZ"),s("n12u"),{validator:function(t){return"number"===typeof+t}}),a={name:"feedTool",props:{hasLike:{type:Boolean,required:!0},likeCount:Object.assign({type:[Number,String],required:!0},i),viewCount:Object.assign({type:[Number,String],required:!0},i),commentCount:Object.assign({type:[Number,String],required:!0},i)},methods:{likeFeed:function(){this.$emit("likeFeed")},commentFeed:function(){this.$emit("commentFeed",this.com)},moreAction:function(){this.$emit("moreAction")}}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"feed-tool"},[s("div",{staticClass:"feed-tool-item",class:{hasLike:t.hasLike},on:{click:function(e){e.stopPropagation(),t.likeFeed(e)}}},[s("v-icon",{staticClass:"feed-tool-icon",attrs:{type:t.hasLike?"feed-like":"feed-unlike"}}),s("span",[t._v(t._s(t.likeCount))])],1),s("div",{staticClass:"feed-tool-item",on:{click:function(e){e.stopPropagation(),t.commentFeed(e)}}},[s("v-icon",{staticClass:"feed-tool-icon",attrs:{type:"feed-comment"}}),s("span",[t._v(t._s(t.commentCount))])],1),s("div",{staticClass:"feed-tool-item"},[s("v-icon",{staticClass:"feed-tool-icon",attrs:{type:"feed-eye"}}),s("span",[t._v(t._s(t.viewCount))])],1),s("div",{staticClass:"feed-tool-item",on:{click:function(e){e.stopPropagation(),t.moreAction(e)}}},[s("v-icon",{staticClass:"feed-tool-icon",attrs:{type:"feed-more"}})],1)])},c=[],u=s("XyMi");function l(t){s("GkDA")}var p=!1,d=l,m="data-v-d56bde0e",h=null,f=Object(u["a"])(a,r,c,p,d,m,h),v=f.exports,g=(s("mJx5"),s("NM/j")),_=s.n(g),y={name:"m-pics",props:{id:{type:Number,required:!0},pics:{type:Array}},created:function(){var t=this;n["a"].$on("updateFile",function(e){var s=e.fid,o=e.index;s===t.id&&(t.pics[o].paid=!0,t.$children[o].fetch(),setTimeout(function(){n["a"].$emit("updatePhoto",t.$children[o].src)},1500))})},methods:{handleClick:function(t,e){var s=this.$children,o=this.pics.map(function(t,e){return Object.assign({},t,{el:s[e].$el,src:s[e].src,index:e})});n["a"].$emit("mvGallery",{fid:this.id,index:e,images:o})},isLongImg:function(t){var e=t.size.split("x"),s=_()(e,2),n=s[0],o=s[1];return t.w=parseInt(n),t.h=parseInt(o),n>3*o||o>3*n},longStyle:function(t,e){return{width:t>518?"518px":t+"px",paddingBottom:e/t*100+"%"}}}},b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["m-pics","m-pics-"+t.pics.length],attrs:{id:"m-pics"+t.id}},[s("ul",{staticClass:"m-pics-list"},t._l(t.pics,function(e,n){return s("li",{key:"pics-"+t.id+"-"+n},[s("div",{class:["m-pics-box",{long:t.isLongImg(e)}],style:1===t.pics.length?t.longStyle(e.w,e.h):""},[s("async-file",{attrs:{file:e.file},scopedSlots:t._u([{key:"default",fn:function(e){return s("div",{staticClass:"m-pic",style:{backgroundImage:"url("+e.src+")"},on:{click:function(e){e.stopPropagation(),t.handleClick(e,n)}}})}}])})],1)])}))])},k=[];function C(t){s("O3sG")}var w=!1,$=C,x=null,M=null,O=Object(u["a"])(y,b,k,w,$,x,M),R=O.exports,T=(s("EuXz"),{name:"feedCommentItem",props:{comment:{required:!0}},computed:{user:function(){var t=this.comment.user;if(t)return t},replyUser:function(){var t=this.comment.reply;return t},body:function(){var t=this.comment.body;return t.length>60?t.slice(0,57)+"…":t}},methods:{to:function(t){this.$router.push({path:t})},commentAction:function(){this.$emit("action",this.user.id,this.user.name,this.comment.id)}},mounted:function(){this.user.id&&this.$store.commit("SAVE_USER",this.user)}}),I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.user.id?s("div",{staticClass:"feed-comment-item",on:{click:function(e){e.stopPropagation(),t.commentAction(e)}}},[s("a",{staticClass:"user-name",on:{click:function(e){e.stopPropagation(),t.to("/user/"+t.user.id)}}},[t._v(t._s(t.user.name))]),t.replyUser?[t._v("\n    回复\n    "),s("a",{staticClass:"user-name",on:{click:function(e){e.stopPropagation(),t.to("/user/"+t.replyUser.id)}}},[t._v(t._s(t.replyUser.name))])]:t._e(),s("span",{staticClass:"content"},[t._v(t._s(t.body))])],2):t._e()},j=[];function L(t){s("eRrM")}var D=!1,E=L,G=null,S=null,P=Object(u["a"])(T,I,j,D,E,G,S),F=P.exports,A=s("ZoQJ"),B=["feed","group"],z={feed:{required:!0},channel:{validator:function(t){return Object(A["c"])(t,B)}},showFeedTime:{type:Boolean,default:!1},isPinned:{type:Boolean,default:!1},isPay:{type:Boolean,default:!1}},q={feedTools:v,feedImages:R,feedCommentItem:F},U={viewUser:function(){this.$router.push("/user/".concat(this.feed.user_id))},viewPic:function(){console.log("查看图片")},commentAction:function(t,e,s){if(t===this.$store.state.CURRENTUSER.id)this.showCommentAction(s);else{var n=e&&t?"回复".concat(e):"随便说说";this.showCommentInput({placeholder:n,reply_user:t})}},showCommentAction:function(t){var e=this;this.$Modal.info({render:function(s){var n=this;return s("div",{},[s("button",{on:{click:function(){e.deleteComment(t,n.onOk)}}},"删除"),s("button",{on:{click:function(){e.pinnedComment(t,n.onOk)}}},"申请评论置顶")])},onOk:function(){this.$Modal.remove()}})},showCommentInput:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,s=t,n=s.reply_user;t=Object.assign({},{onOk:function(t){e.commentFeed(t,n,function(){e.$Modal.remove()})}},t),this.$Modal.commentInpt(t)}},N={user:function(){return this.feed.user},time:function(){return this.feed.created_at.replace(/-/g,"/")},images:function(){return this.feed.images||[]},comments:function(){return this.feed.comments||[]},isOwner:function(){return this.user.id===this.$store.state.CURRENTUSER.id}},X={props:z,computed:N,components:q,methods:U},H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"feed-item",on:{click:t.viewFeed}},[t.showFeedTime?s("span",[t._v(t._s(t._f("time2txt")(t.time)))]):s("v-avatar",{staticClass:"feed-item-avatar",attrs:{sex:t.user.sex,src:t.user.avatar},nativeOn:{click:function(e){e.stopPropagation(),t.viewUser(e)}}}),s("div",{staticClass:"feed-item-content"},[t.showFeedTime?t._e():s("div",{staticClass:"feed-item-content-info"},[s("span",{on:{click:function(e){e.stopPropagation(),t.viewUser(e)}}},[t._v(t._s(t.user.name))]),s("div",[t.isPinned?s("i",{staticClass:"feed-item-content-info-pinned-icon"},[t._v("置顶")]):t._e(),[s("span",{staticClass:"feed-item-content-info-time"},[t._v("\n                        "+t._s(t._f("time2tips")(t.time))+"\n                    ")])]],2)]),t.title?[s("div",{staticClass:"feed-item-content-title"},[t._v(t._s(t.title))])]:t._e(),t.text?[s("div",{staticClass:"feed-item-content-text"},[s("span",[t._v(t._s(t.text))]),t.isPay?s("span",{staticClass:"blur"},[t._v(t._s("魑魅魍魉魑魅魍魉魑魅"))]):t._e()])]:t._e(),t.images.length>0?[s("feed-images",{staticClass:"feed-item-content-imgs",attrs:{pics:t.images,id:t.feed.id},on:{viewPic:t.viewPic}})]:t._e()],2),s("div",{staticClass:"feed-item-foot"},[s("feed-tools",{attrs:{hasLike:t.hasLike,likeCount:t.likeCount,viewCount:t.viewCount,commentCount:t.commentCount},on:{likeFeed:t.likeFeed,moreAction:t.moreAction,commentFeed:t.showCommentInput}})],1),t.commentCount?[s("div",{staticClass:"feed-item-comments"},[t._l(t.comments.slice(0,5),function(e){return e.id?s("feed-comment-item",{key:e.id,attrs:{comment:e},on:{action:t.commentAction}}):t._e()}),t.commentCount>5?s("a",{on:{click:t.viewFeed}},[t._v("查看更多")]):t._e()],2)]:t._e()],2)},Q=[],W=!1,Z=null,J=null,Y=null,V=Object(u["a"])(X,H,Q,W,Z,J,Y),K=V.exports;s("O7VB");s.d(e,"a",function(){return tt});var tt={extends:K,name:"GroupFeedItem",mixins:[o]}},Z77R:function(t,e){},eRrM:function(t,e){},gbyG:function(t,e,s){"use strict";var n=s("Ds5P"),o=s("ot5s")(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),s("RhFG")("includes")},kqpo:function(t,e,s){var n=s("u0PK"),o=s("/whu");t.exports=function(t,e,s){if(n(e))throw TypeError("String#"+s+" doesn't accept regex!");return String(o(t))}},qEFG:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=s("XZbU"),a={name:"my-groups-audit-list",components:{GroupFeedItem:i["a"]},data:function(){return{list:[]}},computed:{head:function(){return this.$route.meta.head}},methods:{onRefresh:function(){var t=this;this.$http.get("/plus-group/user-group-posts?limit=15&type=".concat(this.$route.meta.index)).then(function(e){var s=e.data;t.list=o()(s),t.$refs.loadmore.topEnd(!(s.length<15))})},onLoadMore:function(){var t=this;this.$http.get("/plus-group/user-groups",{params:{limit:15,type:"audit",offset:this.list.length}}).then(function(e){var s=e.data;t.list=o()(t.list).concat(o()(s)),t.$refs.loadmore.bottomEnd(s.length<15)})}},mounted:function(){this.$refs.loadmore.beforeRefresh()}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.head?s("head-top",{attrs:{"go-back":!0,title:"我的帖子"}}):t._e(),s("load-more",{ref:"loadmore",attrs:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},t._l(t.list,function(e){return e.id?s("group-feed-item",{key:e.id,attrs:{feed:e}}):t._e()}))],1)},c=[],u=s("XyMi"),l=!1,p=null,d=null,m=null,h=Object(u["a"])(a,r,c,l,p,d,m);e["default"]=h.exports},qwQ3:function(t,e,s){s("Vg1y")("search",1,function(t,e,s){return[function(s){"use strict";var n=t(this),o=void 0==s?void 0:s[e];return void 0!==o?o.call(s,n):new RegExp(s)[e](String(n))},s]})},s8NT:function(t,e){},tM4Z:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"my-group-groups",data:function(){return{navs:[{path:"/own/groups/joined",title:"我加入的"},{path:"/own/groups/audit",title:"待审核的"}]}},computed:{activeTab:{get:function(){return this.$route.path},set:function(t){this.$router.push(t)}}}},o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav-tabs",{attrs:{fixed:!0,navs:t.navs,value:t.activeTab}})},i=[],a=s("XyMi"),r=!1,c=null,u=null,l=null,p=Object(a["a"])(n,o,i,r,c,u,l);e["default"]=p.exports},unYp:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rzQm"),o=s.n(n),i=s("BW2B"),a=s("v+qG"),r={name:"joinedGroup",components:{HeadTop:i["a"],groupItem:a["a"]},data:function(){return{myGroups:[]}},methods:{cancel:function(){this.$router.go(-1)},getMyGroups:function(){var t=this;this.$http.get("/plus-group/user-groups").then(function(e){var s=e.data,n=void 0===s?[]:s;n&&(t.myGroups=o()(n))})}},created:function(){this.getMyGroups()}},c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("head-top",{attrs:{"go-back":t.cancel,title:"我加入的"}}),s("div",t._l(t.myGroups,function(t){return s("group-item",{key:"group-"+t.id,attrs:{group:t,role:!0}})}))],1)},u=[],l=s("XyMi");function p(t){s("Wq5o")}var d=!1,m=p,h=null,f=null,v=Object(l["a"])(r,c,u,d,m,h,f);e["default"]=v.exports},"v+qG":function(t,e,s){"use strict";s("SldL");var n=s("7hDC"),o=s.n(n),i="group-list-item",a={name:"groupListItem",props:{group:{required:!0},role:Boolean,append:{type:Boolean,default:!0}},data:function(){return{prefixCls:i,requesting:!1}},computed:{header:function(){return this.group.avatar},roles:function(){if(this.role){var t={label:"",cls:""},e=this.group.joined,s=e||{},n=s.role,o=void 0===n?"普通成员":n;switch(o){case"member":t.label="普通成员";break;case"administrator":t.label="管理员";break;case"founder":t.label="圈主";break}return t.cls=o,t}}},methods:{to:function(t){t&&this.$router.push({path:t})},beforeJoin:function(){var t=this.group,e=t.mode,s=t.money;if("paid"===e){var n=(~~s).toFixed(2);this.$Modal.pay({price:n,content:"您只需支付".concat(n,"来加入圈子"),onOk:this.joinGroup})}else this.joinGroup()},joinGroup:function(){var t=o()(regeneratorRuntime.mark(function t(e){var s,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.requesting){t.next=2;break}return t.abrupt("return");case 2:return this.requesting=!0,t.next=5,this.$http.put("/plus-group/groups/".concat(this.group.id));case 5:s=t.sent,n=s.status,o=s.data,201===n&&(this.group.joined=!0,this.$Message.success(o),this.requesting=!1,e&&e());case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),beforeToDetail:function(){"public"===this.group.mode||this.group.joined?this.to("/group/".concat(this.group.id)):this.$Message.error("需要先加入圈子, 才能查看圈子信息哦~")}}},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.prefixCls,attrs:{id:"group-"+t.group.id},on:{click:t.beforeToDetail}},[s("div",{class:t.prefixCls+"-header"},[s("img",{directives:[{name:"lazyload",rawName:"v-lazyload",value:t.header,expression:"header"}]})]),s("div",{class:t.prefixCls+"-info"},[s("div",{class:t.prefixCls+"-name"},[s("h3",{staticClass:"ellipsis"},[t._v(t._s(t.group.name))]),"paid"===t.group.mode?s("i",{class:t.prefixCls+"-paid-icon"},[t._v("付费")]):t._e()]),s("p",[s("span",[t._v("帖子"),s("i",{staticClass:"num"},[t._v(t._s(t._f("formatNum")(t.group.posts_count||0)))])]),s("span",[t._v("成员"),s("i",{staticClass:"num"},[t._v(t._s(t._f("formatNum")(t.group.users_count||0)))])])])]),t.append?s("div",{class:t.prefixCls+"-action"},[t.group.joined?t._e():s("a",{class:[t.prefixCls+"-action-btn","join"],on:{click:function(e){e.stopPropagation(),t.beforeJoin(e)}}},[s("svg",[s("use",{attrs:{"xlink:href":"#foot-plus"}})]),t._v("加入\n    ")]),t.role?s("div",{class:[t.prefixCls+"-role",t.roles.cls]},[t._v(t._s(t.roles.label))]):t._e()]):t._e()])},c=[],u=s("XyMi");function l(t){s("Asc8")}var p=!1,d=l,m=null,h=null,f=Object(u["a"])(a,r,c,p,d,m,h);e["a"]=f.exports},w2te:function(t,e){},zcKR:function(t,e){},znu7:function(t,e){}});
//# sourceMappingURL=group.js.map